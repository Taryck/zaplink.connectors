<?xml version="1.0" encoding="utf-16"?>
<CONTAINER NAME="ZAPLINK_ENHANCEMENT" VERSION="1.0" CLASS="ZAPLINK_CONTAINER">
 <ZL_OBJECT CHECKSUM="4D8797F6450CBAABD189B00A38F1D9E5" CODE_SIGNATURE="B94D603522D31828CF14787390753355" CONNECTOR="39AC0A4B07A5A05AE1000000AC120173" NAME="ZAPLINK_ENHANCEMENT" TYPE="CLAS" VERSION="1.01">
  <DEPENDENCIES>
   <ITEM TYPE="CLAS" NAME="ZAPLINK_CONNECTOR_"/>
   <ITEM TYPE="CLAS" NAME="ZAPLINK_ENHANCEMENT_DATA"/>
  </DEPENDENCIES>
  <DIRECTORY SRCSYSTEM="OD6" AUTHOR="TBENSIAL" DEVCLASS="ZAPLINK-CONNECTORS-MAIN" MASTERLANG="E"/>
  <RAW>
   <A0_MAINDATA VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" AUTHOR="TBENSIAL" CREATEDON="20110622" CLSCCINCL="X" FIXPT="X" UNICODE="X" R3RELEASE="701">
    <INHERITANCE REFCLSNAME="ZAPLINK_CONNECTOR_" VERSION="1" STATE="1" AUTHOR="TBENSIAL" CREATEDON="20110622" CHANGEDBY="TBENSIAL" CHANGEDON="20110701"/>
    <TEXTS>
     <ITEM LANG="E" TEXT="ZAP Link Connector : BADI Definitions &amp; Implementations">U1&amp;FUNCTIONALITY&amp;
ASIs a connector for :
AS- SXSD : BADI Definition
AS- SXCI : BADI Implementation
U1&amp;RELATIONS&amp;
ASIs part of ZAP Link Framework as Official Connector.
ASRequire Official connector for Object types (CLAS &amp; INTF).
U1&amp;EXAMPLE&amp;
AS
U1&amp;HINTS&amp;
AS
U1&amp;FURTHER_SOURCES_OF_INF&amp;
AShttps://code.google.com/p/zaplink/wiki/Connector
U1Memories
ASThis application is dedicated to the memories of :
B2My father : Lamri BENSIALI (1940-2004) without whom I never started
  programming
B2My uncle : Jacky BEDU (1934-2009) who died during the completion of this
  application</ITEM>
    </TEXTS>
   </A0_MAINDATA>
   <ALIASES>
    <ITEM CMPNAME="TT_LTEXTS" VERSION="1" EXPOSURE="2" CMPTYPE="3" REFCLSNAME="ZAPLINK_DATATYPES" REFCMPNAME="TT_LTEXTS"/>
   </ALIASES>
   <ATTRIBUTS>
    <ITEM CMPNAME="BALLOG_SUBOBJECT" VERSION="1" EXPOSURE="2" STATE="1" EDITORDER="1 " AUTHOR="TBENSIAL" CREATEDON="20110622" CHANGEDBY="TBENSIAL" CHANGEDON="20110831" ATTDECLTYP="2" ATTVALUE="&apos;CNX_ENHENCEMENT&apos;" TYPTYPE="1" TYPE="BALSUBOBJ">
     <TEXTS>
      <ITEM LANG="E" TEXT="Application Log: Subobject"/>
     </TEXTS>
    </ITEM>
    <ITEM CMPNAME="R_DOC_ID_DEFINITION" VERSION="1" STATE="1" EDITORDER="2 " AUTHOR="TBENSIAL" CREATEDON="20110622" CHANGEDBY="TBENSIAL" CHANGEDON="20110629" ATTDECLTYP="1" TYPTYPE="1" TYPE="TR_DOCID"/>
    <ITEM CMPNAME="R_DOC_ID_IMPLEMENTATION" VERSION="1" STATE="1" EDITORDER="3 " AUTHOR="TBENSIAL" CREATEDON="20110622" CHANGEDBY="TBENSIAL" CHANGEDON="20110629" ATTDECLTYP="1" TYPTYPE="1" TYPE="TR_DOCID"/>
    <ITEM CMPNAME="ST_COMP_ENH_IMPL" VERSION="1" EXPOSURE="2" STATE="1" EDITORDER="2 " AUTHOR="TBENSIAL" CREATEDON="20110629" CHANGEDBY="TBENSIAL" CHANGEDON="20110831" ATTDECLTYP="2" ATTVALUE="&apos;ENHC&apos;" TYPTYPE="1" TYPE="TD_COMPTYPE">
     <TEXTS>
      <ITEM LANG="E" TEXT="Transport category : Composit Enhancement Implementation"/>
     </TEXTS>
    </ITEM>
    <ITEM CMPNAME="ST_COMP_ENH_SPOT" VERSION="1" EXPOSURE="2" STATE="1" EDITORDER="3 " AUTHOR="TBENSIAL" CREATEDON="20110622" CHANGEDBY="TBENSIAL" CHANGEDON="20110831" ATTDECLTYP="2" ATTVALUE="&apos;ENSC&apos;" TYPTYPE="1" TYPE="TD_COMPTYPE">
     <TEXTS>
      <ITEM LANG="E" TEXT="Transport category : Compisit Enhancement Spot"/>
     </TEXTS>
    </ITEM>
    <ITEM CMPNAME="ST_ENH_IMPL" VERSION="1" EXPOSURE="2" STATE="1" EDITORDER="4 " AUTHOR="TBENSIAL" CREATEDON="20110628" CHANGEDBY="TBENSIAL" CHANGEDON="20110831" ATTDECLTYP="2" ATTVALUE="&apos;ENHO&apos;" TYPTYPE="1" TYPE="TD_COMPTYPE">
     <TEXTS>
      <ITEM LANG="E" TEXT="Transport category : Enhancement Implementation"/>
     </TEXTS>
    </ITEM>
    <ITEM CMPNAME="ST_ENH_SPOT" VERSION="1" EXPOSURE="2" STATE="1" EDITORDER="5 " AUTHOR="TBENSIAL" CREATEDON="20110622" CHANGEDBY="TBENSIAL" CHANGEDON="20110831" ATTDECLTYP="2" ATTVALUE="&apos;ENHS&apos;" TYPTYPE="1" TYPE="TD_COMPTYPE">
     <TEXTS>
      <ITEM LANG="E" TEXT="Transport category : Enhancement Spot"/>
     </TEXTS>
    </ITEM>
    <ITEM CMPNAME="_UUID" VERSION="1" STATE="1" EDITORDER="8 " AUTHOR="TBENSIAL" CREATEDON="20110622" CHANGEDBY="TBENSIAL" CHANGEDON="20110629" ATTDECLTYP="2" ATTVALUE="&apos;4181014E2AC27D33E1000000AC1201D6&apos;" TYPTYPE="1" TYPE="TD_CONNUUID">
     <TEXTS>
      <ITEM LANG="E" TEXT="UUID for connector BADI"/>
     </TEXTS>
    </ITEM>
    <ITEM CMPNAME="_VER" VERSION="1" STATE="1" EDITORDER="9 " AUTHOR="TBENSIAL" CREATEDON="20110622" CHANGEDBY="TBENSIAL" CHANGEDON="20110629" ATTDECLTYP="2" ATTVALUE="&apos;0.0&apos;" TYPTYPE="1" TYPE="TD_CONNVER">
     <TEXTS>
      <ITEM LANG="E" TEXT="Connector Version"/>
     </TEXTS>
    </ITEM>
   </ATTRIBUTS>
   <DEFERRED>
    <CLASSES>
     <ITEM TYPEGROUP="ZAPLINK_ENHANCEMENT_DATA" VERSION="1" TPUTYPE="1" EXPLICIT="X"/>
    </CLASSES>
   </DEFERRED>
   <LOCAL>
    <TYPES>`
*&quot;* USE THIS SOURCE FILE FOR ANY TYPE DECLARATIONS (CLASS
*&quot;* definitions, interfaces or data types) you need for method
*&quot;* IMPLEMENTATION OR PRIVATE METHOD&apos;S SIGNATURE</TYPES>
    <IMPLEMENTATIONS>`
*&quot;* LOCAL CLASS IMPLEMENTATION FOR PUBLIC CLASS
*&quot;* use this source file for the implementation part of
*&quot;* LOCAL HELPER CLASSES</IMPLEMENTATIONS>
    <MACROS>`
*&quot;* USE THIS SOURCE FILE FOR ANY MACRO DEFINITIONS YOU NEED
*&quot;* IN THE IMPLEMENTATION PART OF THE CLASS

INCLUDE zaplink_macros.</MACROS>
   </LOCAL>
   <METHODS>
    <ITEM CMPNAME="CLASS_CONSTRUCTOR" VERSION="1" EXPOSURE="2" STATE="1" EDITORDER="1 " AUTHOR="TBENSIAL" CREATEDON="20110622" CHANGEDBY="TBENSIAL" CHANGEDON="20110831" MTDTYPE="2" MTDDECLTYP="1">
     <TEXTS>
      <ITEM LANG="E" TEXT="CLASS_CONSTRUCTOR"/>
     </TEXTS>
     <SOURCE>`
*table TDCLT
*DOKCLASS DOKTITEL
*BI       Business Add-Ins: Implementations
  DATA _id LIKE LINE OF r_doc_id_definition.

  _id-sign = &apos;I&apos;.
  _id-option = &apos;EQ&apos;.
  _id-low = &apos;HY&apos;. APPEND _id TO r_doc_id_definition.

  _id-low = &apos;BI&apos;. APPEND _id TO r_doc_id_implementation.</SOURCE>
    </ITEM>
    <ITEM CMPNAME="CONSTRUCTOR" VERSION="1" EXPOSURE="2" STATE="1" EDITORDER="2 " AUTHOR="TBENSIAL" CREATEDON="20110622" CHANGEDBY="TBENSIAL" CHANGEDON="20110831" MTDTYPE="2">
     <TEXTS>
      <ITEM LANG="E" TEXT="CONSTRUCTOR"/>
     </TEXTS>
     <SOURCE>`
  DATA type LIKE LINE OF supported_types.

  CALL METHOD super-&gt;constructor.
  mac_create_log application_log ballog_subobject space.
  type-type = st_enh_spot.        INSERT type INTO TABLE supported_types.
  type-type = st_comp_enh_spot.   INSERT type INTO TABLE supported_types.
  type-type = st_enh_impl.        INSERT type INTO TABLE supported_types.
  type-type = st_comp_enh_impl.   INSERT type INTO TABLE supported_types.

  uuid = _uuid.
  version = _ver.</SOURCE>
    </ITEM>
    <ITEM CMPNAME="CONVERT_COMP_ENH_IMPL" VERSION="1" STATE="1" EDITORDER="9 " AUTHOR="TBENSIAL" CREATEDON="20110629" CHANGEDBY="TBENSIAL" CHANGEDON="20110713" R3RELEASE="701">
     <TEXTS>
      <ITEM LANG="E" TEXT="Convert Composit Enhancement Implementation (SAP obj) to RAW"/>
     </TEXTS>
     <PARAMETERS>
      <ITEM SCONAME="COMPONENTS_LIST" VERSION="1" CMPTYPE="1" EDITORDER="3 " AUTHOR="TBENSIAL" CREATEDON="20110629" PARPASSTYP="1" TYPTYPE="1" TYPE="TO_LIST"/>
      <ITEM SCONAME="RAW_OBJECT" VERSION="1" CMPTYPE="1" EDITORDER="4 " AUTHOR="TBENSIAL" CREATEDON="20110629" CHANGEDBY="TBENSIAL" CHANGEDON="20110629" PARDECLTYP="3" TYPTYPE="1" TYPE="TO_COMP_ENH_IMPL">
       <TEXTS>
        <ITEM LANG="E" TEXT="Data for Composit Enhancement Implementation"/>
       </TEXTS>
      </ITEM>
      <ITEM SCONAME="SAP_OBJECT" VERSION="1" CMPTYPE="1" EDITORDER="2 " AUTHOR="TBENSIAL" CREATEDON="20110629" CHANGEDBY="TBENSIAL" CHANGEDON="20110629" TYPTYPE="1" TYPE="TO_COMP_ENH_IMPL_SAP">
       <TEXTS>
        <ITEM LANG="E" TEXT="Enhancement Composite"/>
       </TEXTS>
      </ITEM>
      <ITEM SCONAME="SUB_COMPONENTS" VERSION="1" CMPTYPE="1" EDITORDER="1 " AUTHOR="TBENSIAL" CREATEDON="20110629" PARPASSTYP="1" TYPTYPE="1" TYPE="TD_WITH_SUBCOMP">
       <TEXTS>
        <ITEM LANG="E" TEXT="Composite Enhancement Spot"/>
       </TEXTS>
      </ITEM>
     </PARAMETERS>
     <SOURCE>`
  DATA s_comp         TYPE zaplink_enhc_data=&gt;ts_fm_data.
  DATA version        TYPE r3state.
  DATA o_enh          TYPE to_enh_impl_sap.
  DATA o_comp         TYPE to_comp_enh_impl_sap.
  FIELD-SYMBOLS:
    &lt;enh&gt;   LIKE LINE OF raw_object-&gt;enhancement_implementations,
    &lt;comp&gt;  LIKE LINE OF raw_object-&gt;composit_enh_implementations.

  ASSERT sap_object IS BOUND.
  CREATE OBJECT raw_object.
  version = get_version( sap_object ).
  s_comp-header = sap_object-&gt;get_enhcompheader( version ).
  IF sub_components &gt;= sub_component-with_required.
    s_comp-comp_enh = sap_object-&gt;if_enh_composite~get_composite_childs( version ).
    s_comp-enh = sap_object-&gt;if_enh_composite~get_enh_childs( version ).
  ENDIF.
  raw_object-&gt;from_data( s_comp ).

* Sub component as object if present (depend on sub_component value)
  LOOP AT raw_object-&gt;enhancement_implementations ASSIGNING &lt;enh&gt;.
    o_enh = _load_enh_impl( &lt;enh&gt;-name ).
    CHECK o_enh IS BOUND.
    CREATE OBJECT &lt;enh&gt;-zl_object.
    &lt;enh&gt;-zl_object-&gt;raw = convert_enh_impl( sap_object = o_enh
                                         sub_components = sub_components
                                        components_list = components_list ).
    IF NOT &lt;enh&gt;-zl_object-&gt;raw IS BOUND.    CLEAR &lt;enh&gt;-zl_object.     ENDIF.
    IF &lt;enh&gt;-zl_object IS BOUND.      CLEAR &lt;enh&gt;-name.       ENDIF.
  ENDLOOP.

  LOOP AT raw_object-&gt;composit_enh_implementations ASSIGNING &lt;comp&gt;.
    o_comp = _load_comp_enh_impl( &lt;comp&gt;-name ).
    CHECK o_comp IS BOUND.
    CREATE OBJECT &lt;comp&gt;-zl_object.
    &lt;comp&gt;-zl_object-&gt;raw = convert_comp_enh_impl( sap_object = o_comp
                                               sub_components = sub_components
                                              components_list = components_list ).
    IF NOT &lt;comp&gt;-zl_object-&gt;raw IS BOUND.    CLEAR &lt;comp&gt;-zl_object.     ENDIF.
    IF &lt;comp&gt;-zl_object IS BOUND.      CLEAR &lt;comp&gt;-name.       ENDIF.
  ENDLOOP.

  CLEAR raw_object-&gt;a0_maindata-enhcomposite.</SOURCE>
    </ITEM>
    <ITEM CMPNAME="CONVERT_COMP_ENH_SPOT" VERSION="1" STATE="1" EDITORDER="7 " AUTHOR="TBENSIAL" CREATEDON="20110623" CHANGEDBY="TBENSIAL" CHANGEDON="20110713">
     <TEXTS>
      <ITEM LANG="E" TEXT="Convert Composit Enhancement Spot (SAP object) to RAW data"/>
     </TEXTS>
     <PARAMETERS>
      <ITEM SCONAME="COMPONENTS_LIST" VERSION="1" CMPTYPE="1" EDITORDER="3 " AUTHOR="TBENSIAL" CREATEDON="20110623" CHANGEDBY="TBENSIAL" CHANGEDON="20110629" PARPASSTYP="1" TYPTYPE="1" TYPE="TO_LIST"/>
      <ITEM SCONAME="RAW_OBJECT" VERSION="1" CMPTYPE="1" EDITORDER="4 " AUTHOR="TBENSIAL" CREATEDON="20110623" CHANGEDBY="TBENSIAL" CHANGEDON="20110629" PARDECLTYP="3" TYPTYPE="1" TYPE="TO_COMP_ENH_SPOT">
       <TEXTS>
        <ITEM LANG="E" TEXT="Data for Composit Enhancement Spot"/>
       </TEXTS>
      </ITEM>
      <ITEM SCONAME="SAP_OBJECT" VERSION="1" CMPTYPE="1" EDITORDER="2 " AUTHOR="TBENSIAL" CREATEDON="20110623" CHANGEDBY="TBENSIAL" CHANGEDON="20110629" TYPTYPE="1" TYPE="TO_COMP_ENH_SPOT_SAP">
       <TEXTS>
        <ITEM LANG="E" TEXT="Enhancement Composite"/>
       </TEXTS>
      </ITEM>
      <ITEM SCONAME="SUB_COMPONENTS" VERSION="1" CMPTYPE="1" EDITORDER="1 " AUTHOR="TBENSIAL" CREATEDON="20110623" CHANGEDBY="TBENSIAL" CHANGEDON="20110629" PARPASSTYP="1" TYPTYPE="1" TYPE="TD_WITH_SUBCOMP">
       <TEXTS>
        <ITEM LANG="E" TEXT="Composite Enhancement Spot"/>
       </TEXTS>
      </ITEM>
     </PARAMETERS>
     <SOURCE>`
  DATA s_comp         TYPE zaplink_ensc_data=&gt;ts_fm_data.
  DATA version        TYPE r3state.
*  DATA short_id       TYPE sotr_conc.
*  DATA long_id        TYPE sotr_conc.
  DATA o_enh          TYPE to_enh_spot_sap.
  DATA o_comp         TYPE to_comp_enh_spot_sap.
  FIELD-SYMBOLS:
    &lt;enh&gt;   LIKE LINE OF raw_object-&gt;enhancements,
    &lt;comp&gt;  LIKE LINE OF raw_object-&gt;composit_enhancements.

  ASSERT sap_object IS BOUND.
  CREATE OBJECT raw_object.
  version = get_version( sap_object ).
  s_comp-header = sap_object-&gt;get_enhspotcomphead( version ).
  IF sub_components &gt;= sub_component-with_required.
    s_comp-comp_enh = sap_object-&gt;if_enh_spot_composite~get_composite_childs( version ).
    s_comp-enh = sap_object-&gt;if_enh_spot_composite~get_enh_spot_childs( version ).
  ENDIF.
  raw_object-&gt;from_data( s_comp ).

* Sub objects as object if present (depend on sub_component)
  LOOP AT raw_object-&gt;enhancements ASSIGNING &lt;enh&gt;.
    o_enh = _load_enh_spot( &lt;enh&gt;-name ).
    CHECK o_enh IS BOUND.
    CREATE OBJECT &lt;enh&gt;-zl_object.
    &lt;enh&gt;-zl_object-&gt;raw = convert_enh_spot( sap_object = o_enh
                                         sub_components = sub_components
                                        components_list = components_list ).
    IF NOT &lt;enh&gt;-zl_object-&gt;raw IS BOUND.    CLEAR &lt;enh&gt;-zl_object.     ENDIF.
    IF &lt;enh&gt;-zl_object IS BOUND.      CLEAR &lt;enh&gt;-name.       ENDIF.
  ENDLOOP.

  LOOP AT raw_object-&gt;composit_enhancements ASSIGNING &lt;comp&gt;.
    o_comp = _load_comp_enh_spot( &lt;comp&gt;-name ).
    CHECK o_comp IS BOUND.
    CREATE OBJECT &lt;comp&gt;-zl_object.
    &lt;comp&gt;-zl_object-&gt;raw = convert_comp_enh_spot( sap_object = o_comp
                                               sub_components = sub_components
                                              components_list = components_list ).
    IF NOT &lt;comp&gt;-zl_object-&gt;raw IS BOUND.    CLEAR &lt;comp&gt;-zl_object.     ENDIF.
    IF &lt;comp&gt;-zl_object IS BOUND.      CLEAR &lt;comp&gt;-name.       ENDIF.
  ENDLOOP.

  CLEAR raw_object-&gt;a0_maindata-enhspotcomposite.</SOURCE>
    </ITEM>
    <ITEM CMPNAME="CONVERT_ENHANCEMENT" VERSION="1" STATE="1" EDITORDER="6 " AUTHOR="TBENSIAL" CREATEDON="20110629" CHANGEDBY="TBENSIAL" CHANGEDON="20110713" R3RELEASE="701">
     <TEXTS>
      <ITEM LANG="E" TEXT="Convert Enhancement (SAP object) to RAW data"/>
     </TEXTS>
     <PARAMETERS>
      <ITEM SCONAME="COMPONENTS_LIST" VERSION="1" CMPTYPE="1" EDITORDER="3 " AUTHOR="TBENSIAL" CREATEDON="20110629" CHANGEDBY="TBENSIAL" CHANGEDON="20110629" PARPASSTYP="1" TYPTYPE="1" TYPE="TO_LIST"/>
      <ITEM SCONAME="RAW_OBJECT" VERSION="1" CMPTYPE="1" EDITORDER="4 " AUTHOR="TBENSIAL" CREATEDON="20110629" CHANGEDBY="TBENSIAL" CHANGEDON="20110629" PARDECLTYP="3" TYPTYPE="1" TYPE="TO_RAW_DATA"/>
      <ITEM SCONAME="SAP_OBJECT" VERSION="1" CMPTYPE="1" EDITORDER="2 " AUTHOR="TBENSIAL" CREATEDON="20110629" CHANGEDBY="TBENSIAL" CHANGEDON="20110629" TYPTYPE="1" TYPE="TO_ENHANCEMENT_SAP">
       <TEXTS>
        <ITEM LANG="E" TEXT="General Methods for Enhancement Objects"/>
       </TEXTS>
      </ITEM>
      <ITEM SCONAME="SUB_COMPONENTS" VERSION="1" CMPTYPE="1" EDITORDER="1 " AUTHOR="TBENSIAL" CREATEDON="20110629" PARPASSTYP="1" TYPTYPE="1" TYPE="TD_WITH_SUBCOMP">
       <TEXTS>
        <ITEM LANG="E" TEXT="Composite Enhancement Spot"/>
       </TEXTS>
      </ITEM>
     </PARAMETERS>
     <SOURCE>`
  DATA o_ces      TYPE to_comp_enh_spot_sap.
  DATA o_es       TYPE to_enh_spot_sap.
  DATA o_cei      TYPE to_comp_enh_impl_sap.
  DATA o_ei       TYPE to_enh_impl_sap.

* Composit Enhancement Spot
  TRY.
      o_ces ?= sap_object.
      raw_object = convert_comp_enh_spot( sap_object = o_ces
                                      sub_components = sub_components
                                     components_list = components_list ).
    CATCH cx_sy_move_cast_error.    &quot; Wrong Type
  ENDTRY.
  CHECK raw_object IS NOT BOUND.

* Enhancement Spot
  TRY.
      o_es ?= sap_object.
      raw_object = convert_enh_spot( sap_object = o_es
                                 sub_components = sub_components
                                components_list = components_list ).
    CATCH cx_sy_move_cast_error.    &quot; Wrong Type
  ENDTRY.
  CHECK raw_object IS NOT BOUND.

* Composit Enhancement Implementation
  TRY.
      o_cei ?= sap_object.
      raw_object = convert_comp_enh_impl( sap_object = o_cei
                                      sub_components = sub_components
                                     components_list = components_list ).
    CATCH cx_sy_move_cast_error.    &quot; Wrong Type
  ENDTRY.
  CHECK raw_object IS NOT BOUND.

* Enhancement Implementation
  TRY.
      o_ei ?= sap_object.
      raw_object = convert_enh_impl( sap_object = o_ei
                                 sub_components = sub_components
                                components_list = components_list ).
    CATCH cx_sy_move_cast_error.    &quot; Wrong Type
  ENDTRY.
  ASSERT raw_object IS BOUND.</SOURCE>
    </ITEM>
    <ITEM CMPNAME="CONVERT_ENH_IMPL" VERSION="1" STATE="1" EDITORDER="10 " AUTHOR="TBENSIAL" CREATEDON="20110629" CHANGEDBY="TBENSIAL" CHANGEDON="20110713" R3RELEASE="701">
     <TEXTS>
      <ITEM LANG="E" TEXT="Convert Enhancement Implementation (SAP object) to RAW data"/>
     </TEXTS>
     <PARAMETERS>
      <ITEM SCONAME="COMPONENTS_LIST" VERSION="1" CMPTYPE="1" EDITORDER="3 " AUTHOR="TBENSIAL" CREATEDON="20110629" PARPASSTYP="1" TYPTYPE="1" TYPE="TO_LIST"/>
      <ITEM SCONAME="RAW_OBJECT" VERSION="1" CMPTYPE="1" EDITORDER="4 " AUTHOR="TBENSIAL" CREATEDON="20110629" CHANGEDBY="TBENSIAL" CHANGEDON="20110629" PARDECLTYP="3" TYPTYPE="1" TYPE="TO_ENH_IMPL">
       <TEXTS>
        <ITEM LANG="E" TEXT="Data for Enhancement Implementation"/>
       </TEXTS>
      </ITEM>
      <ITEM SCONAME="SAP_OBJECT" VERSION="1" CMPTYPE="1" EDITORDER="2 " AUTHOR="TBENSIAL" CREATEDON="20110629" CHANGEDBY="TBENSIAL" CHANGEDON="20110629" TYPTYPE="1" TYPE="TO_ENH_IMPL_SAP">
       <TEXTS>
        <ITEM LANG="E" TEXT="Enhancement Tool Redefinition BAdI"/>
       </TEXTS>
      </ITEM>
      <ITEM SCONAME="SUB_COMPONENTS" VERSION="1" CMPTYPE="1" EDITORDER="1 " AUTHOR="TBENSIAL" CREATEDON="20110629" PARPASSTYP="1" TYPTYPE="1" TYPE="TD_WITH_SUBCOMP">
       <TEXTS>
        <ITEM LANG="E" TEXT="Composite Enhancement Spot"/>
       </TEXTS>
      </ITEM>
     </PARAMETERS>
     <SOURCE>`
  DATA s_comp         TYPE zaplink_enho_data=&gt;ts_fm_data.
  DATA version        TYPE r3state.
  DATA name           TYPE enhname.
  DATA o_store        TYPE REF TO cl_enh_store.   &quot; if_enh_store.
  DATA hdr            TYPE enhheader.

  ASSERT sap_object IS BOUND.
  CREATE OBJECT raw_object.
  version = get_version( sap_object ).
  name = s_comp-header-spot_name = sap_object-&gt;get_spot_name( version ).

* Texts
  o_store ?= sap_object-&gt;get_store( ).
  hdr = o_store-&gt;get_enhheader( version ).
  s_comp-header-text_ids-short = hdr-shorttext_id.
  s_comp-header-text_ids-long = hdr-docu_id.

* Implementations
  s_comp-impl_data = sap_object-&gt;get_implementations( version ).

*Composite Parent
* From : Module STATUS_0100 in SAPLENHANCEMENT_EDITOR
  s_comp-header-composite = cl_enh_factory=&gt;enh_find_parent_composite( name ) .

* From : FORM lesen_sfw in SAPLENHANCEMENT_EDITOR
*  l_wa_swf-objecttype = &apos;ENHO&apos;.
*  l_wa_swf-objectname = i_objekt.
*
*  APPEND l_wa_swf TO l_it_swf.
*
*  CALL FUNCTION &apos;SFW_GET_SWITCHPOS&apos;
*    EXPORTING
*      provide_text = &apos;X&apos;
*    TABLES
*      switchtab    = l_it_swf.
*
*  SORT l_it_swf BY objecttype
*                   objectname.
*
*  READ TABLE l_it_swf WITH KEY objecttype = g_object_type    &quot;&apos;ENHO&apos;
*                               objectname = enh_edt_layout-object1
*                      INTO l_wa_swf BINARY SEARCH.
*
*  IF sy-subrc = 0.
*    MOVE :
*       l_wa_swf-state        TO p_switch_pos,
*       l_wa_swf-text         TO p_switch_text,
*       l_wa_swf-switch_id    TO p_switch_id.
*  ENDIF.

* IF_ENH_PERSIST~LOAD_LOGS =&gt; Creation date

  raw_object-&gt;from_data( s_comp ).

*  IF sub_components = abap_true.
*  ENDIF.
  CLEAR raw_object-&gt;a0_maindata-composite.</SOURCE>
    </ITEM>
    <ITEM CMPNAME="CONVERT_ENH_SPOT" VERSION="1" STATE="1" EDITORDER="8 " AUTHOR="TBENSIAL" CREATEDON="20110624" CHANGEDBY="TBENSIAL" CHANGEDON="20110713">
     <TEXTS>
      <ITEM LANG="E" TEXT="Convert Enhancement Spot (SAP object) to RAW data"/>
     </TEXTS>
     <PARAMETERS>
      <ITEM SCONAME="COMPONENTS_LIST" VERSION="1" CMPTYPE="1" EDITORDER="3 " AUTHOR="TBENSIAL" CREATEDON="20110624" CHANGEDBY="TBENSIAL" CHANGEDON="20110629" PARPASSTYP="1" TYPTYPE="1" TYPE="TO_LIST"/>
      <ITEM SCONAME="RAW_OBJECT" VERSION="1" CMPTYPE="1" EDITORDER="4 " AUTHOR="TBENSIAL" CREATEDON="20110624" CHANGEDBY="TBENSIAL" CHANGEDON="20110629" PARDECLTYP="3" TYPTYPE="1" TYPE="TO_ENH_SPOT">
       <TEXTS>
        <ITEM LANG="E" TEXT="Data for Composit Enhancement Spot"/>
       </TEXTS>
      </ITEM>
      <ITEM SCONAME="SAP_OBJECT" VERSION="1" CMPTYPE="1" EDITORDER="2 " AUTHOR="TBENSIAL" CREATEDON="20110624" CHANGEDBY="TBENSIAL" CHANGEDON="20110629" TYPTYPE="1" TYPE="TO_ENH_SPOT_SAP">
       <TEXTS>
        <ITEM LANG="E" TEXT="Enhancement Tool BAdI"/>
       </TEXTS>
      </ITEM>
      <ITEM SCONAME="SUB_COMPONENTS" VERSION="1" CMPTYPE="1" EDITORDER="1 " AUTHOR="TBENSIAL" CREATEDON="20110624" CHANGEDBY="TBENSIAL" CHANGEDON="20110629" PARPASSTYP="1" TYPTYPE="1" TYPE="TD_WITH_SUBCOMP">
       <TEXTS>
        <ITEM LANG="E" TEXT="Composite Enhancement Spot"/>
       </TEXTS>
      </ITEM>
     </PARAMETERS>
     <SOURCE>`
  DATA s_comp           TYPE zaplink_enhs_data=&gt;ts_fm_data.
  DATA version          TYPE r3state.
  DATA name             TYPE enhspotcompositename.
  DATA texts            TYPE zaplink_enhs_data=&gt;ts_sotr.
*  DATA et_textvers      TYPE enhtext_vers_it.
*  DATA et_textversdata  TYPE enhtext_versdata_it.

  ASSERT sap_object IS BOUND.
  CREATE OBJECT raw_object.
  s_comp-header-version = version = get_version( sap_object ).
  s_comp-header-name = name = sap_object-&gt;if_enh_spot_tool~get_name( ).

* Tool Type : BADI or not BADI
  s_comp-header-tool_type = sap_object-&gt;if_enh_spot_tool~get_tool( ).
* Texts
* From CL_R3STANDARD_PERSISTENCE=&gt;LOAD_SPOT
  SELECT SINGLE shorttextid docuid
    INTO (texts-short, texts-long)
    FROM enhspotheader
    WHERE enhspot = name
      AND version = &apos;I&apos;.
  IF sy-subrc &lt;&gt; 0.
    SELECT SINGLE shorttextid docuid
      INTO (texts-short, texts-long)
      FROM enhspotheader
      WHERE enhspot = name.
*        AND version = &apos;A&apos;.
  ENDIF.
  IF texts IS NOT INITIAL.
    s_comp-texts = raw_object-&gt;sotr_2_texts( texts ).
  ENDIF.
* From CL_ENH_SPOT_EDITOR=&gt;HANDLE_SPOT_NEW :
*      CALL METHOD sap_object-&gt;get_all_elements
*        EXPORTING
*          version  = l_state
*        RECEIVING
*          elements = l_it_elem_it.
**     Verarbeitung der ENHOBJ-Sätze
*      LOOP AT l_it_elem_it INTO l_r_w_elem.
*        CASE l_r_w_elem-&gt;get_type( ).
*          WHEN &apos;R3OB&apos;.
*            l_r_obj_int = l_r_w_elem-&gt;get_as_sap_object_element( ).
*            l_enhobj = l_r_obj_int-&gt;get_enhspotobj( ).
*            APPEND l_enhobj TO l_it_enhobj.
* look at implementation
*      CALL METHOD cl_r3standard_persistence=&gt;find_enhancements_by_obj
*        EXPORTING
*          obj_type        = &apos;ENHS&apos;
*          obj_name        = l_obj_name
**          version         = l_state
*        RECEIVING
*          enhancement_ids = l_it_enhname.

* Language : Form FUELL_DY_ENHSPOT in program SAPLENHANCEMENT_SPOT_EDITOR
  sap_object-&gt;if_enh_object~get_language( IMPORTING org_langu = s_comp-header-lang-language ) .
*                                                   modi_langu = s_comp-header-lang-modi_langu ).

* Attributes
  sap_object-&gt;if_enh_spot_tool~get_attributes(
      EXPORTING version = version
      IMPORTING  author = s_comp-header-attrs-author
              createdon = s_comp-header-attrs-createdon
              changedby = s_comp-header-attrs-changedby
              changedon = s_comp-header-attrs-changedon
      ).
* Composite
  s_comp-header-composite = cl_enh_factory=&gt;enhspot_find_parent_composite( name ).
* Internal use
  s_comp-header-internal_use = sap_object-&gt;if_enh_spot_tool~get_internal( version ).

*  sap_object-&gt;if_enh_spot_tool~get_tool_object_texts( EXPORTING i_state = version
*                                                  IMPORTING et_textvers = et_textvers
*                                                        et_textversdata = et_textversdata ).
  s_comp-def_data = sap_object-&gt;get_badi_defs( version ).

  raw_object-&gt;from_data( s_comp ).

*  IF sub_components = abap_true.
*  ENDIF.
  CLEAR raw_object-&gt;a0_maindata-name.</SOURCE>
    </ITEM>
    <ITEM CMPNAME="CREATE_SOTR_ID" VERSION="1" EXPOSURE="2" STATE="1" EDITORDER="3 " AUTHOR="TBENSIAL" CREATEDON="20110829" CHANGEDBY="TBENSIAL" CHANGEDON="20110831" MTDDECLTYP="1">
     <TEXTS>
      <ITEM LANG="E" TEXT="Create a new SOTR Document ID"/>
     </TEXTS>
     <PARAMETERS>
      <ITEM SCONAME="RESULT" VERSION="1" CMPTYPE="1" EDITORDER="1 " AUTHOR="TBENSIAL" CREATEDON="20110829" CHANGEDBY="TBENSIAL" CHANGEDON="20110831" PARDECLTYP="3" TYPTYPE="1" TYPE="ZAPLINK_ENHANCEMENT_DATA=&gt;TD_SOTR_CONCEPT"/>
     </PARAMETERS>
     <SOURCE>`
  CALL FUNCTION &apos;GUID_CREATE&apos;
    IMPORTING
*     EV_GUID_16       =
*     EV_GUID_22       =
      ev_guid_32       = result.
  ASSERT result IS NOT INITIAL.</SOURCE>
    </ITEM>
    <ITEM CMPNAME="GET_VERSION" VERSION="1" STATE="1" EDITORDER="16 " AUTHOR="TBENSIAL" CREATEDON="20110624" CHANGEDBY="TBENSIAL" CHANGEDON="20110713" MTDDECLTYP="1">
     <TEXTS>
      <ITEM LANG="E" TEXT="Get Version of Enhancement (from SAP Object)"/>
     </TEXTS>
     <PARAMETERS>
      <ITEM SCONAME="ENHANCEMENT" VERSION="1" CMPTYPE="1" EDITORDER="1 " AUTHOR="TBENSIAL" CREATEDON="20110624" CHANGEDBY="TBENSIAL" CHANGEDON="20110629" PARPASSTYP="1" TYPTYPE="3" TYPE="IF_ENH_OBJECT">
       <TEXTS>
        <ITEM LANG="E" TEXT="General Methods for Enhancement Objects"/>
       </TEXTS>
      </ITEM>
      <ITEM SCONAME="VERSION" VERSION="1" CMPTYPE="1" EDITORDER="2 " AUTHOR="TBENSIAL" CREATEDON="20110624" CHANGEDBY="TBENSIAL" CHANGEDON="20110629" PARDECLTYP="3" TYPTYPE="1" TYPE="R3STATE">
       <TEXTS>
        <ITEM LANG="E" TEXT="ABAP: Program Status (Active, Saved, Transported...)"/>
       </TEXTS>
      </ITEM>
     </PARAMETERS>
     <SOURCE>`
  IF enhancement-&gt;has_active_version( ) = abap_true.
    version = &apos;A&apos;.
  ELSE.
    version = &apos;I&apos;.
  ENDIF.</SOURCE>
    </ITEM>
    <ITEM CMPNAME="IMPORT_TO_COMP_ENH_SPOT" VERSION="1" STATE="1" EDITORDER="17 " AUTHOR="TBENSIAL" CREATEDON="20110623" CHANGEDBY="TBENSIAL" CHANGEDON="20110713" MTDNEWEXC="X">
     <TEXTS>
      <ITEM LANG="E" TEXT="Import Composit Enhancement Spot to SAP"/>
     </TEXTS>
     <PARAMETERS>
      <ITEM SCONAME="COMPONENTS" VERSION="1" CMPTYPE="1" EDITORDER="2 " AUTHOR="TBENSIAL" CREATEDON="20110623" CHANGEDBY="TBENSIAL" CHANGEDON="20110629" PARDECLTYP="3" TYPTYPE="1" TYPE="TO_LIST"/>
      <ITEM SCONAME="O_DATA" VERSION="1" CMPTYPE="1" EDITORDER="1 " AUTHOR="TBENSIAL" CREATEDON="20110623" CHANGEDBY="TBENSIAL" CHANGEDON="20110629" PARPASSTYP="1" TYPTYPE="1" TYPE="TO_COMP_ENH_SPOT">
       <TEXTS>
        <ITEM LANG="E" TEXT="Data for Composit Enhancement Spot"/>
       </TEXTS>
      </ITEM>
     </PARAMETERS>
     <EXCEPTIONS>
      <ITEM SCONAME="ZAPLINK_CX_CONNECTOR" VERSION="1" LANGU="E" EDITORDER="1 " AUTHOR="TBENSIAL" CREATEDON="20110623">
       <TEXTS>
        <ITEM LANG="E" TEXT="ZAPlink ROOT Exception for Connectors"/>
       </TEXTS>
      </ITEM>
     </EXCEPTIONS>
     <SOURCE>`
  DATA s_comp     TYPE zaplink_ensc_data=&gt;ts_fm_data.
  DATA o_comp     TYPE REF TO if_enh_spot_composite.    &quot;cl_enh_spot_composite.

  s_comp = o_data-&gt;to_data( ).
  CALL METHOD cl_r3standard_persistence=&gt;create_spot_composite
    EXPORTING
      name      = o_data-&gt;a0_maindata-enhspotcomposite
      scwb_call = abap_false
      run_dark  = abap_true
    IMPORTING
      composite = o_comp
*          CHANGING
*            trkorr    = trkorr
*            devclass  = devclass
    .
*  o_comp-&gt;set_shorttext( l_text ).
*  o_comp-&gt;add_composite_child( enhspotcompcreate-enhspotcomposite ).
*  o_comp-&gt;add_enh_spot_child( ).
  o_comp-&gt;if_enh_object~save( ).</SOURCE>
    </ITEM>
    <ITEM CMPNAME="LOAD_COMP_ENH_IMPL" VERSION="1" STATE="1" EDITORDER="21 " AUTHOR="TBENSIAL" CREATEDON="20110629" CHANGEDBY="TBENSIAL" CHANGEDON="20110831" MTDNEWEXC="X" R3RELEASE="701">
     <TEXTS>
      <ITEM LANG="E" TEXT="Load Enhancement Implementation as SAP object"/>
     </TEXTS>
     <PARAMETERS>
      <ITEM SCONAME="COMPONENT" VERSION="1" CMPTYPE="1" EDITORDER="1 " AUTHOR="TBENSIAL" CREATEDON="20110629" CHANGEDBY="TBENSIAL" CHANGEDON="20110629" PARPASSTYP="1" TYPTYPE="1" TYPE="TO_COMPONENT">
       <TEXTS>
        <ITEM LANG="E" TEXT="Composite Enhancement Implementation"/>
       </TEXTS>
      </ITEM>
      <ITEM SCONAME="LOCKING" VERSION="1" CMPTYPE="1" EDITORDER="3 " AUTHOR="TBENSIAL" CREATEDON="20110812" PARPASSTYP="1" TYPTYPE="1" TYPE="ENHBOOLEAN" PAROPTIONL="X">
       <TEXTS>
        <ITEM LANG="E" TEXT="Enhancement Boolean"/>
       </TEXTS>
      </ITEM>
      <ITEM SCONAME="OBJECT" VERSION="1" CMPTYPE="1" EDITORDER="2 " AUTHOR="TBENSIAL" CREATEDON="20110629" CHANGEDBY="TBENSIAL" CHANGEDON="20110629" PARDECLTYP="3" TYPTYPE="1" TYPE="TO_COMP_ENH_IMPL_SAP">
       <TEXTS>
        <ITEM LANG="E" TEXT="Enhancement Composite"/>
       </TEXTS>
      </ITEM>
     </PARAMETERS>
     <EXCEPTIONS>
      <ITEM SCONAME="ZAPLINK_CX_CONNECTOR" VERSION="1" LANGU="E" EDITORDER="1 " AUTHOR="TBENSIAL" CREATEDON="20110831">
       <TEXTS>
        <ITEM LANG="E" TEXT="ZAPlink ROOT Exception for Connectors"/>
       </TEXTS>
      </ITEM>
     </EXCEPTIONS>
     <SOURCE>`
  DATA _name      TYPE td_enh_impl_name.

  ASSERT component-&gt;get_type( ) = st_comp_enh_impl.
  _name = component-&gt;get_name( ).

  object ?= _load_comp_enh_impl( name = _name
                              locking = locking ).</SOURCE>
    </ITEM>
    <ITEM CMPNAME="LOAD_COMP_ENH_SPOT" VERSION="1" STATE="1" EDITORDER="18 " AUTHOR="TBENSIAL" CREATEDON="20110623" CHANGEDBY="TBENSIAL" CHANGEDON="20110713">
     <TEXTS>
      <ITEM LANG="E" TEXT="Load Composit Enhancement Spot as SAP object"/>
     </TEXTS>
     <PARAMETERS>
      <ITEM SCONAME="COMPONENT" VERSION="1" CMPTYPE="1" EDITORDER="1 " AUTHOR="TBENSIAL" CREATEDON="20110629" PARPASSTYP="1" TYPTYPE="1" TYPE="TO_COMPONENT">
       <TEXTS>
        <ITEM LANG="E" TEXT="Composite Enhancement Spot"/>
       </TEXTS>
      </ITEM>
      <ITEM SCONAME="LOCKING" VERSION="1" CMPTYPE="1" EDITORDER="3 " AUTHOR="TBENSIAL" CREATEDON="20110812" PARPASSTYP="1" TYPTYPE="1" TYPE="ENHBOOLEAN" PAROPTIONL="X">
       <TEXTS>
        <ITEM LANG="E" TEXT="Enhancement Boolean"/>
       </TEXTS>
      </ITEM>
      <ITEM SCONAME="OBJECT" VERSION="1" CMPTYPE="1" EDITORDER="2 " AUTHOR="TBENSIAL" CREATEDON="20110623" CHANGEDBY="TBENSIAL" CHANGEDON="20110629" PARDECLTYP="3" TYPTYPE="1" TYPE="TO_COMP_ENH_SPOT_SAP">
       <TEXTS>
        <ITEM LANG="E" TEXT="Enhancement Composite"/>
       </TEXTS>
      </ITEM>
     </PARAMETERS>
     <SOURCE>`
  DATA _name      TYPE td_comp_enh_spot_name.

  ASSERT component-&gt;get_type( ) = st_comp_enh_spot.
  _name = component-&gt;get_name( ).

  object ?= _load_comp_enh_spot( name = _name
                              locking = locking ).</SOURCE>
    </ITEM>
    <ITEM CMPNAME="LOAD_ENHANCEMENT" VERSION="1" STATE="1" EDITORDER="26 " AUTHOR="TBENSIAL" CREATEDON="20110629" CHANGEDBY="TBENSIAL" CHANGEDON="20110713" MTDNEWEXC="X" R3RELEASE="701">
     <TEXTS>
      <ITEM LANG="E" TEXT="Load Enhancement as SAP object"/>
     </TEXTS>
     <PARAMETERS>
      <ITEM SCONAME="COMPONENT" VERSION="1" CMPTYPE="1" EDITORDER="1 " AUTHOR="TBENSIAL" CREATEDON="20110629" PARPASSTYP="1" TYPTYPE="1" TYPE="TO_COMPONENT">
       <TEXTS>
        <ITEM LANG="E" TEXT="Enhancement"/>
       </TEXTS>
      </ITEM>
      <ITEM SCONAME="LOCKING" VERSION="1" CMPTYPE="1" EDITORDER="2 " AUTHOR="TBENSIAL" CREATEDON="20110812" PARPASSTYP="1" TYPTYPE="1" TYPE="ENHBOOLEAN" PAROPTIONL="X">
       <TEXTS>
        <ITEM LANG="E" TEXT="Enhancement Boolean"/>
       </TEXTS>
      </ITEM>
      <ITEM SCONAME="OBJECT" VERSION="1" CMPTYPE="1" EDITORDER="3 " AUTHOR="TBENSIAL" CREATEDON="20110629" CHANGEDBY="TBENSIAL" CHANGEDON="20110812" PARDECLTYP="3" TYPTYPE="1" TYPE="TO_ENHANCEMENT_SAP">
       <TEXTS>
        <ITEM LANG="E" TEXT="General Methods for Enhancement Objects"/>
       </TEXTS>
      </ITEM>
     </PARAMETERS>
     <EXCEPTIONS>
      <ITEM SCONAME="ZAPLINK_CX_CONNECTOR" VERSION="1" LANGU="E" EDITORDER="1 " AUTHOR="TBENSIAL" CREATEDON="20110629">
       <TEXTS>
        <ITEM LANG="E" TEXT="ZAPlink ROOT Exception for Connectors"/>
       </TEXTS>
      </ITEM>
     </EXCEPTIONS>
     <SOURCE>`
  DATA d_type         TYPE td_comptype.

  TRY.
    d_type = component-&gt;get_type( ).
    CASE d_type.
      WHEN st_enh_spot.
        object = load_enh_spot( component = component
                                  locking = locking ).
      WHEN st_comp_enh_spot.
        object = load_comp_enh_spot( component = component
                                       locking = locking ).
      WHEN st_enh_impl.
        object = load_enh_impl( component = component
                                  locking = locking ).
      WHEN st_comp_enh_impl.
        object = load_comp_enh_impl( component = component
                                       locking = locking ).
      WHEN OTHERS.
        mac_raise_type_not_supported me-&gt;class_name d_type.
    ENDCASE.
    mac_def_catch zaplink_cx_connector.
  ENDTRY.</SOURCE>
    </ITEM>
    <ITEM CMPNAME="LOAD_ENH_IMPL" VERSION="1" STATE="1" EDITORDER="20 " AUTHOR="TBENSIAL" CREATEDON="20110629" CHANGEDBY="TBENSIAL" CHANGEDON="20110713">
     <TEXTS>
      <ITEM LANG="E" TEXT="Load Enhancement Implementation as SAP object"/>
     </TEXTS>
     <PARAMETERS>
      <ITEM SCONAME="COMPONENT" VERSION="1" CMPTYPE="1" EDITORDER="1 " AUTHOR="TBENSIAL" CREATEDON="20110629" CHANGEDBY="TBENSIAL" CHANGEDON="20110629" PARPASSTYP="1" TYPTYPE="1" TYPE="TO_COMPONENT">
       <TEXTS>
        <ITEM LANG="E" TEXT="Enhancement Implementation"/>
       </TEXTS>
      </ITEM>
      <ITEM SCONAME="LOCKING" VERSION="1" CMPTYPE="1" EDITORDER="3 " AUTHOR="TBENSIAL" CREATEDON="20110812" PARPASSTYP="1" TYPTYPE="1" TYPE="ENHBOOLEAN" PAROPTIONL="X">
       <TEXTS>
        <ITEM LANG="E" TEXT="Enhancement Boolean"/>
       </TEXTS>
      </ITEM>
      <ITEM SCONAME="OBJECT" VERSION="1" CMPTYPE="1" EDITORDER="2 " AUTHOR="TBENSIAL" CREATEDON="20110629" CHANGEDBY="TBENSIAL" CHANGEDON="20110629" PARDECLTYP="3" TYPTYPE="1" TYPE="TO_ENH_IMPL_SAP">
       <TEXTS>
        <ITEM LANG="E" TEXT="Enhancement Tool Redefinition BAdI"/>
       </TEXTS>
      </ITEM>
     </PARAMETERS>
     <SOURCE>`
  DATA _name      TYPE td_enh_impl_name.

  ASSERT component-&gt;get_type( ) = st_enh_impl.
  _name = component-&gt;get_name( ).

  object ?= _load_enh_impl( name = _name
                         locking = locking ).</SOURCE>
    </ITEM>
    <ITEM CMPNAME="LOAD_ENH_SPOT" VERSION="1" STATE="1" EDITORDER="19 " AUTHOR="TBENSIAL" CREATEDON="20110624" CHANGEDBY="TBENSIAL" CHANGEDON="20110713">
     <TEXTS>
      <ITEM LANG="E" TEXT="Load Enhancement Spot as SAP object"/>
     </TEXTS>
     <PARAMETERS>
      <ITEM SCONAME="COMPONENT" VERSION="1" CMPTYPE="1" EDITORDER="1 " AUTHOR="TBENSIAL" CREATEDON="20110629" PARPASSTYP="1" TYPTYPE="1" TYPE="TO_COMPONENT">
       <TEXTS>
        <ITEM LANG="E" TEXT="Enhancement Spot"/>
       </TEXTS>
      </ITEM>
      <ITEM SCONAME="LOCKING" VERSION="1" CMPTYPE="1" EDITORDER="3 " AUTHOR="TBENSIAL" CREATEDON="20110812" PARPASSTYP="1" TYPTYPE="1" TYPE="ENHBOOLEAN" PAROPTIONL="X">
       <TEXTS>
        <ITEM LANG="E" TEXT="Enhancement Boolean"/>
       </TEXTS>
      </ITEM>
      <ITEM SCONAME="OBJECT" VERSION="1" CMPTYPE="1" EDITORDER="2 " AUTHOR="TBENSIAL" CREATEDON="20110624" CHANGEDBY="TBENSIAL" CHANGEDON="20110629" PARDECLTYP="3" TYPTYPE="1" TYPE="TO_ENH_SPOT_SAP">
       <TEXTS>
        <ITEM LANG="E" TEXT="Enhancement Tool BAdI"/>
       </TEXTS>
      </ITEM>
     </PARAMETERS>
     <SOURCE>`
  DATA _name      TYPE td_enh_spot_name.

  ASSERT component-&gt;get_type( ) = st_enh_spot.
  _name = component-&gt;get_name( ).

  object ?= _load_enh_spot( name = _name
                         locking = locking ).</SOURCE>
    </ITEM>
    <ITEM CMPNAME="OFF_EXPORT_FROM_COMP_ENH_IMPL" VERSION="1" STATE="1" EDITORDER="14 " AUTHOR="TBENSIAL" CREATEDON="20110629" CHANGEDBY="TBENSIAL" CHANGEDON="20110713" MTDNEWEXC="X" R3RELEASE="701">
     <TEXTS>
      <ITEM LANG="E" TEXT="Export Composit Enhancement Implementation from SAP"/>
     </TEXTS>
     <PARAMETERS>
      <ITEM SCONAME="COMPONENT" VERSION="1" CMPTYPE="1" EDITORDER="1 " AUTHOR="TBENSIAL" CREATEDON="20110629" PARPASSTYP="1" TYPTYPE="1" TYPE="TO_COMPONENT">
       <TEXTS>
        <ITEM LANG="E" TEXT="Component to export"/>
       </TEXTS>
      </ITEM>
      <ITEM SCONAME="OBJECT" VERSION="1" CMPTYPE="1" EDITORDER="2 " AUTHOR="TBENSIAL" CREATEDON="20110629" PARDECLTYP="3" TYPTYPE="1" TYPE="TO_COMP_ENH_IMPL">
       <TEXTS>
        <ITEM LANG="E" TEXT="Data for Composit Enhancement Implementation"/>
       </TEXTS>
      </ITEM>
     </PARAMETERS>
     <EXCEPTIONS>
      <ITEM SCONAME="ZAPLINK_CX_CONNECTOR" VERSION="1" LANGU="E" EDITORDER="1 " AUTHOR="TBENSIAL" CREATEDON="20110629">
       <TEXTS>
        <ITEM LANG="E" TEXT="ZAPlink ROOT Exception for Connectors"/>
       </TEXTS>
      </ITEM>
     </EXCEPTIONS>
     <SOURCE>`
  DATA f_subcomp  TYPE td_with_subcomp.
  DATA o_list     TYPE to_list.
  DATA o_sap_intf TYPE to_comp_enh_impl_sap.

  TRY.
    o_sap_intf = load_comp_enh_impl( component ).
    ASSERT o_sap_intf is bound.

    f_subcomp = component-&gt;get_with_subcomp( ).
    CREATE OBJECT o_list.
    component-&gt;set_subcomponents( o_list ).

*    object = convert_comp_enh_spot( sap_object = o_sap_intf
*                                sub_components = f_subcomp
*                               components_list = o_list ).

    TRY.
        o_list-&gt;remove( component ).
      CATCH zaplink_cx_list.
    ENDTRY.

    mac_def_catch zaplink_cx_connector.
  ENDTRY.</SOURCE>
    </ITEM>
    <ITEM CMPNAME="OFF_EXPORT_FROM_COMP_ENH_SPOT" VERSION="1" STATE="1" EDITORDER="12 " AUTHOR="TBENSIAL" CREATEDON="20110629" CHANGEDBY="TBENSIAL" CHANGEDON="20110713" MTDNEWEXC="X">
     <TEXTS>
      <ITEM LANG="E" TEXT="Export Composit Enhancement Spot from SAP"/>
     </TEXTS>
     <PARAMETERS>
      <ITEM SCONAME="COMPONENT" VERSION="1" CMPTYPE="1" EDITORDER="1 " AUTHOR="TBENSIAL" CREATEDON="20110629" PARPASSTYP="1" TYPTYPE="1" TYPE="TO_COMPONENT">
       <TEXTS>
        <ITEM LANG="E" TEXT="Component to export"/>
       </TEXTS>
      </ITEM>
      <ITEM SCONAME="OBJECT" VERSION="1" CMPTYPE="1" EDITORDER="2 " AUTHOR="TBENSIAL" CREATEDON="20110629" PARDECLTYP="3" TYPTYPE="1" TYPE="TO_COMP_ENH_SPOT">
       <TEXTS>
        <ITEM LANG="E" TEXT="Data for Composit Enhancement Spot"/>
       </TEXTS>
      </ITEM>
     </PARAMETERS>
     <EXCEPTIONS>
      <ITEM SCONAME="ZAPLINK_CX_CONNECTOR" VERSION="1" LANGU="E" EDITORDER="1 " AUTHOR="TBENSIAL" CREATEDON="20110629">
       <TEXTS>
        <ITEM LANG="E" TEXT="ZAPlink ROOT Exception for Connectors"/>
       </TEXTS>
      </ITEM>
     </EXCEPTIONS>
     <SOURCE>`
  DATA f_subcomp  TYPE td_with_subcomp.
  DATA o_list     TYPE to_list.
  DATA o_sap_intf TYPE to_comp_enh_spot_sap.

  TRY.
    o_sap_intf = load_comp_enh_spot( component ).
    ASSERT o_sap_intf is bound.

    f_subcomp = component-&gt;get_with_subcomp( ).
    CREATE OBJECT o_list.
    component-&gt;set_subcomponents( o_list ).

    object = convert_comp_enh_spot( sap_object = o_sap_intf
                                sub_components = f_subcomp
                               components_list = o_list ).

    TRY.
        o_list-&gt;remove( component ).
      CATCH zaplink_cx_list.
    ENDTRY.

    mac_def_catch zaplink_cx_connector.
  ENDTRY.</SOURCE>
    </ITEM>
    <ITEM CMPNAME="OFF_EXPORT_FROM_ENHANCEMENT" VERSION="1" STATE="1" EDITORDER="11 " AUTHOR="TBENSIAL" CREATEDON="20110629" CHANGEDBY="TBENSIAL" CHANGEDON="20110713" MTDNEWEXC="X" R3RELEASE="701">
     <TEXTS>
      <ITEM LANG="E" TEXT="Export Enhancement from SAP"/>
     </TEXTS>
     <PARAMETERS>
      <ITEM SCONAME="COMPONENT" VERSION="1" CMPTYPE="1" EDITORDER="1 " AUTHOR="TBENSIAL" CREATEDON="20110629" PARPASSTYP="1" TYPTYPE="1" TYPE="TO_COMPONENT">
       <TEXTS>
        <ITEM LANG="E" TEXT="Component to export"/>
       </TEXTS>
      </ITEM>
      <ITEM SCONAME="OBJECT" VERSION="1" CMPTYPE="1" EDITORDER="2 " AUTHOR="TBENSIAL" CREATEDON="20110629" PARDECLTYP="3" TYPTYPE="1" TYPE="TO_RAW"/>
     </PARAMETERS>
     <EXCEPTIONS>
      <ITEM SCONAME="ZAPLINK_CX_CONNECTOR" VERSION="1" LANGU="E" EDITORDER="1 " AUTHOR="TBENSIAL" CREATEDON="20110629">
       <TEXTS>
        <ITEM LANG="E" TEXT="ZAPlink ROOT Exception for Connectors"/>
       </TEXTS>
      </ITEM>
     </EXCEPTIONS>
     <SOURCE>`
*  DATA f_subcomp  TYPE td_with_subcomp.
*  DATA o_list     TYPE to_list.
*  DATA o_sap_intf TYPE to_enhancement_sap.
*
*  TRY.
*    o_sap_intf = load_comp_enh_spot( component ).
*    ASSERT o_sap_intf is bound.
*
*    f_subcomp = component-&gt;get_with_subcomp( ).
*    CREATE OBJECT o_list.
*    component-&gt;set_subcomponents( o_list ).
*
*    object = convert_enhancement( sap_object = o_sap_intf
*                              sub_components = f_subcomp
*                             components_list = o_list ).
*
*    TRY.
*        o_list-&gt;remove( component ).
*      CATCH zaplink_cx_list.
*    ENDTRY.
*
*    mac_def_catch zaplink_cx_connector.
*  ENDTRY.</SOURCE>
    </ITEM>
    <ITEM CMPNAME="OFF_EXPORT_FROM_ENH_IMPL" VERSION="1" STATE="1" EDITORDER="15 " AUTHOR="TBENSIAL" CREATEDON="20110629" CHANGEDBY="TBENSIAL" CHANGEDON="20110713" MTDNEWEXC="X" R3RELEASE="701">
     <TEXTS>
      <ITEM LANG="E" TEXT="Export Enhancement Implementation from SAP"/>
     </TEXTS>
     <PARAMETERS>
      <ITEM SCONAME="COMPONENT" VERSION="1" CMPTYPE="1" EDITORDER="1 " AUTHOR="TBENSIAL" CREATEDON="20110629" PARPASSTYP="1" TYPTYPE="1" TYPE="TO_COMPONENT">
       <TEXTS>
        <ITEM LANG="E" TEXT="Component to export"/>
       </TEXTS>
      </ITEM>
      <ITEM SCONAME="OBJECT" VERSION="1" CMPTYPE="1" EDITORDER="2 " AUTHOR="TBENSIAL" CREATEDON="20110629" PARDECLTYP="3" TYPTYPE="1" TYPE="TO_ENH_IMPL">
       <TEXTS>
        <ITEM LANG="E" TEXT="Data for Enhancement Implementation"/>
       </TEXTS>
      </ITEM>
     </PARAMETERS>
     <EXCEPTIONS>
      <ITEM SCONAME="ZAPLINK_CX_CONNECTOR" VERSION="1" LANGU="E" EDITORDER="1 " AUTHOR="TBENSIAL" CREATEDON="20110629">
       <TEXTS>
        <ITEM LANG="E" TEXT="ZAPlink ROOT Exception for Connectors"/>
       </TEXTS>
      </ITEM>
     </EXCEPTIONS>
     <SOURCE>`
  DATA f_subcomp  TYPE td_with_subcomp.
  DATA o_list     TYPE to_list.
  DATA o_sap_intf TYPE to_comp_enh_spot_sap.

  TRY.
    o_sap_intf = load_comp_enh_spot( component ).
    ASSERT o_sap_intf is bound.

    f_subcomp = component-&gt;get_with_subcomp( ).
    CREATE OBJECT o_list.
    component-&gt;set_subcomponents( o_list ).

*    object = convert_comp_enh_spot( sap_object = o_sap_intf
*                                sub_components = f_subcomp
*                               components_list = o_list ).

    TRY.
        o_list-&gt;remove( component ).
      CATCH zaplink_cx_list.
    ENDTRY.

    mac_def_catch zaplink_cx_connector.
  ENDTRY.</SOURCE>
    </ITEM>
    <ITEM CMPNAME="OFF_EXPORT_FROM_ENH_SPOT" VERSION="1" STATE="1" EDITORDER="13 " AUTHOR="TBENSIAL" CREATEDON="20110629" CHANGEDBY="TBENSIAL" CHANGEDON="20110713" MTDNEWEXC="X">
     <TEXTS>
      <ITEM LANG="E" TEXT="Export Enhancement Spot from SAP"/>
     </TEXTS>
     <PARAMETERS>
      <ITEM SCONAME="COMPONENT" VERSION="1" CMPTYPE="1" EDITORDER="1 " AUTHOR="TBENSIAL" CREATEDON="20110629" PARPASSTYP="1" TYPTYPE="1" TYPE="TO_COMPONENT">
       <TEXTS>
        <ITEM LANG="E" TEXT="Component to export"/>
       </TEXTS>
      </ITEM>
      <ITEM SCONAME="OBJECT" VERSION="1" CMPTYPE="1" EDITORDER="2 " AUTHOR="TBENSIAL" CREATEDON="20110629" PARDECLTYP="3" TYPTYPE="1" TYPE="TO_ENH_SPOT">
       <TEXTS>
        <ITEM LANG="E" TEXT="Data for Enhancement Spot"/>
       </TEXTS>
      </ITEM>
     </PARAMETERS>
     <EXCEPTIONS>
      <ITEM SCONAME="ZAPLINK_CX_CONNECTOR" VERSION="1" LANGU="E" EDITORDER="1 " AUTHOR="TBENSIAL" CREATEDON="20110629">
       <TEXTS>
        <ITEM LANG="E" TEXT="ZAPlink ROOT Exception for Connectors"/>
       </TEXTS>
      </ITEM>
     </EXCEPTIONS>
     <SOURCE>`
*  DATA f_subcomp  TYPE td_with_subcomp.
*  DATA o_list     TYPE to_list.
*  DATA o_sap_intf TYPE to_comp_enh_spot_sap.
*
*  TRY.
*
*    o_sap_intf = load_comp_enh_spot( component ).
*    ASSERT o_sap_intf is bound.
*
*    f_subcomp = component-&gt;get_with_subcomp( ).
*    CREATE OBJECT o_list.
*    component-&gt;set_subcomponents( o_list ).
*
*    object = convert_enh_spot( sap_object = o_sap_intf
*                           sub_components = f_subcomp
*                          components_list = o_list ).
*
*    TRY.
*        o_list-&gt;remove( component ).
*      CATCH zaplink_cx_list.
*    ENDTRY.
*
*    mac_def_catch zaplink_cx_connector.
*  ENDTRY.</SOURCE>
    </ITEM>
    <ITEM CMPNAME="REVERSE_COMP_ENH_IMPL" VERSION="1" STATE="1" EDITORDER="4 " AUTHOR="TBENSIAL" CREATEDON="20110713" R3RELEASE="701">
     <TEXTS>
      <ITEM LANG="E" TEXT="Convert Composit Enhancement Implementation RAW data to SAP"/>
     </TEXTS>
     <PARAMETERS>
      <ITEM SCONAME="COMPONENTS_LIST" VERSION="1" CMPTYPE="1" EDITORDER="2 " AUTHOR="TBENSIAL" CREATEDON="20110713" CHANGEDBY="TBENSIAL" CHANGEDON="20110713" PARPASSTYP="1" TYPTYPE="1" TYPE="TO_LIST"/>
      <ITEM SCONAME="OFF_SUB_COMPONENTS" VERSION="1" CMPTYPE="1" EDITORDER="1 " AUTHOR="TBENSIAL" CREATEDON="20110713" CHANGEDBY="TBENSIAL" CHANGEDON="20110713" PARPASSTYP="1" TYPTYPE="1" TYPE="TD_WITH_SUBCOMP" PAROPTIONL="X">
       <TEXTS>
        <ITEM LANG="E" TEXT="Composite Enhancement Spot"/>
       </TEXTS>
      </ITEM>
      <ITEM SCONAME="RAW_OBJECT" VERSION="1" CMPTYPE="1" EDITORDER="3 " AUTHOR="TBENSIAL" CREATEDON="20110713" CHANGEDBY="TBENSIAL" CHANGEDON="20110713" PARPASSTYP="1" TYPTYPE="1" TYPE="TO_COMP_ENH_IMPL">
       <TEXTS>
        <ITEM LANG="E" TEXT="Data for Composit Enhancement Implementation"/>
       </TEXTS>
      </ITEM>
      <ITEM SCONAME="SAP_OBJECT" VERSION="1" CMPTYPE="1" EDITORDER="4 " AUTHOR="TBENSIAL" CREATEDON="20110713" CHANGEDBY="TBENSIAL" CHANGEDON="20110713" PARDECLTYP="3" TYPTYPE="1" TYPE="TO_COMP_ENH_IMPL_SAP">
       <TEXTS>
        <ITEM LANG="E" TEXT="Enhancement Composite"/>
       </TEXTS>
      </ITEM>
     </PARAMETERS>
     <SOURCE>`
  DATA s_comp         TYPE zaplink_enhc_data=&gt;ts_fm_data.
  DATA o_gen          TYPE REF TO if_enh_composite.
*  DATA name           TYPE  td_comp_enh_spot_name.
  DATA object        TYPE to_comp_enh_impl_sap.
  DATA texts          TYPE zaplink_enhc_data=&gt;ts_sotr.
  DATA l_id           TYPE enhdocuobject.
  FIELD-SYMBOLS: &lt;l&gt;  LIKE LINE OF raw_object-&gt;a0_maindata-texts.

  ASSERT raw_object IS BOUND.
  s_comp = raw_object-&gt;to_data( ).

* Check for existence &amp; Delete if needed
  object ?= _load_comp_enh_impl( name = s_comp-header-enhcomposite
                              locking = abap_true ).
  IF object IS BOUND.
*    object-&gt;delete( run_dark = abap_true ).
*    object-&gt;unlock( ).
  ENDIF.

  cl_enh_factory=&gt;create_enhancement_composite(
        EXPORTING name      = s_comp-header-enhcomposite
                  run_dark  = abap_true
        IMPORTING composite = o_gen ).
  sap_object ?= o_gen.

* Add texts
  l_id = texts-long  = create_sotr_id( ).
  sap_object-&gt;if_enh_composite~set_longtext_id( l_id ).
  READ TABLE raw_object-&gt;a0_maindata-texts ASSIGNING &lt;l&gt;
      WITH KEY lang = sy-langu.
  IF &lt;l&gt; IS ASSIGNED.
    sap_object-&gt;if_enh_object_docu~set_shorttext( &lt;l&gt;-text ).    &quot; not blank string
  ELSE.
    sap_object-&gt;if_enh_object_docu~set_shorttext( &apos;X&apos; ).    &quot; not blank string
  ENDIF.
  sap_object-&gt;if_enh_object~save( ).
*  s_comp-header = sap_object-&gt;get_enhspotcomphead( &apos;I&apos; ).
  texts-short = sap_object-&gt;if_enh_composite~get_shorttext_id(  ).
  set_sotr( sotr = texts
           texts = raw_object-&gt;a0_maindata-texts ).</SOURCE>
    </ITEM>
    <ITEM CMPNAME="REVERSE_COMP_ENH_SPOT" VERSION="1" STATE="1" EDITORDER="2 " AUTHOR="TBENSIAL" CREATEDON="20110713" R3RELEASE="701">
     <TEXTS>
      <ITEM LANG="E" TEXT="Convert Composit Enhancement Spot RAW data to SAP object"/>
     </TEXTS>
     <PARAMETERS>
      <ITEM SCONAME="COMPONENTS_LIST" VERSION="1" CMPTYPE="1" EDITORDER="2 " AUTHOR="TBENSIAL" CREATEDON="20110713" CHANGEDBY="TBENSIAL" CHANGEDON="20110713" PARPASSTYP="1" TYPTYPE="1" TYPE="TO_LIST"/>
      <ITEM SCONAME="OFF_SUB_COMPONENTS" VERSION="1" CMPTYPE="1" EDITORDER="1 " AUTHOR="TBENSIAL" CREATEDON="20110713" CHANGEDBY="TBENSIAL" CHANGEDON="20110713" PARPASSTYP="1" TYPTYPE="1" TYPE="TD_WITH_SUBCOMP" PAROPTIONL="X">
       <TEXTS>
        <ITEM LANG="E" TEXT="OFF Composite Enhancement Spot"/>
       </TEXTS>
      </ITEM>
      <ITEM SCONAME="RAW_OBJECT" VERSION="1" CMPTYPE="1" EDITORDER="3 " AUTHOR="TBENSIAL" CREATEDON="20110713" CHANGEDBY="TBENSIAL" CHANGEDON="20110713" PARPASSTYP="1" TYPTYPE="1" TYPE="TO_COMP_ENH_SPOT">
       <TEXTS>
        <ITEM LANG="E" TEXT="Data for Composit Enhancement Spot"/>
       </TEXTS>
      </ITEM>
      <ITEM SCONAME="SAP_OBJECT" VERSION="1" CMPTYPE="1" EDITORDER="4 " AUTHOR="TBENSIAL" CREATEDON="20110713" CHANGEDBY="TBENSIAL" CHANGEDON="20110713" PARDECLTYP="3" TYPTYPE="1" TYPE="TO_COMP_ENH_SPOT_SAP">
       <TEXTS>
        <ITEM LANG="E" TEXT="Enhancement Composite"/>
       </TEXTS>
      </ITEM>
     </PARAMETERS>
     <SOURCE>`
  DATA s_comp         TYPE zaplink_ensc_data=&gt;ts_fm_data.
  DATA o_gen          TYPE REF TO if_enh_spot_composite.
  DATA name           TYPE  td_comp_enh_spot_name.
  DATA object	        TYPE REF TO if_enh_object.
  DATA texts          TYPE zaplink_enhs_data=&gt;ts_sotr.
  DATA l_id           TYPE enhdocuobject.
  FIELD-SYMBOLS: &lt;l&gt;  LIKE LINE OF raw_object-&gt;a0_maindata-texts.

  ASSERT raw_object IS BOUND.
  s_comp = raw_object-&gt;to_data( ).

* Check for existence &amp; Delete if needed
  object ?= _load_comp_enh_spot( name = s_comp-header-enhspotcomposite
                              locking = abap_true ).
  IF object IS BOUND.
    object-&gt;delete( run_dark = abap_true ).
    object-&gt;unlock( ).
  ENDIF.

* Create new one
  cl_enh_factory=&gt;create_enhancement_spot_comp(
        EXPORTING name      = s_comp-header-enhspotcomposite
                  run_dark  = abap_true
        IMPORTING composite = o_gen ).
  sap_object ?= o_gen.

* Add texts
  l_id = texts-long  = create_sotr_id( ).
  sap_object-&gt;if_enh_spot_composite~set_longtext_id( l_id ).
  READ TABLE raw_object-&gt;a0_maindata-texts ASSIGNING &lt;l&gt;
      WITH KEY lang = sy-langu.
  IF &lt;l&gt; IS ASSIGNED.
    sap_object-&gt;if_enh_object_docu~set_shorttext( &lt;l&gt;-text ).    &quot; not blank string
  ELSE.
    sap_object-&gt;if_enh_object_docu~set_shorttext( &apos;X&apos; ).    &quot; not blank string
  ENDIF.
  sap_object-&gt;if_enh_object~save( ).
*  s_comp-header = sap_object-&gt;get_enhspotcomphead( &apos;I&apos; ).
  texts-short = sap_object-&gt;if_enh_spot_composite~get_shorttext_id(  ).
  set_sotr( sotr = texts
           texts = raw_object-&gt;a0_maindata-texts ).

* Only when sub component
*  LOOP AT s_comp-comp_enh ASSIGNING &lt;ce&gt;.
*    sap_object-&gt;if_enh_spot_composite~add_enh_spot_child( &lt;ce&gt; ).
*  ENDLOOP.
*  LOOP AT s_comp-enh ASSIGNING &lt;e&gt;.
*    sap_object-&gt;if_enh_spot_composite~add_composite_child( &lt;e&gt; ).
*  ENDLOOP.</SOURCE>
    </ITEM>
    <ITEM CMPNAME="REVERSE_ENH_IMPL" VERSION="1" STATE="1" EDITORDER="5 " AUTHOR="TBENSIAL" CREATEDON="20110713" R3RELEASE="701">
     <TEXTS>
      <ITEM LANG="E" TEXT="Convert Enhancement Implementation RAW data to SAP object"/>
     </TEXTS>
     <PARAMETERS>
      <ITEM SCONAME="COMPONENTS_LIST" VERSION="1" CMPTYPE="1" EDITORDER="2 " AUTHOR="TBENSIAL" CREATEDON="20110713" CHANGEDBY="TBENSIAL" CHANGEDON="20110713" PARPASSTYP="1" TYPTYPE="1" TYPE="TO_LIST"/>
      <ITEM SCONAME="OFF_SUB_COMPONENTS" VERSION="1" CMPTYPE="1" EDITORDER="1 " AUTHOR="TBENSIAL" CREATEDON="20110713" PARPASSTYP="1" TYPTYPE="1" TYPE="TD_WITH_SUBCOMP" PAROPTIONL="X">
       <TEXTS>
        <ITEM LANG="E" TEXT="Composite Enhancement Spot"/>
       </TEXTS>
      </ITEM>
      <ITEM SCONAME="RAW_OBJECT" VERSION="1" CMPTYPE="1" EDITORDER="3 " AUTHOR="TBENSIAL" CREATEDON="20110713" CHANGEDBY="TBENSIAL" CHANGEDON="20110713" PARPASSTYP="1" TYPTYPE="1" TYPE="TO_ENH_IMPL">
       <TEXTS>
        <ITEM LANG="E" TEXT="Data for Enhancement Implementation"/>
       </TEXTS>
      </ITEM>
      <ITEM SCONAME="SAP_OBJECT" VERSION="1" CMPTYPE="1" EDITORDER="4 " AUTHOR="TBENSIAL" CREATEDON="20110713" CHANGEDBY="TBENSIAL" CHANGEDON="20110713" PARDECLTYP="3" TYPTYPE="1" TYPE="TO_ENH_IMPL_SAP">
       <TEXTS>
        <ITEM LANG="E" TEXT="Enhancement Tool Redefinition BAdI"/>
       </TEXTS>
      </ITEM>
     </PARAMETERS>
     <SOURCE>`
  DATA s_comp         TYPE zaplink_enho_data=&gt;ts_fm_data.
  DATA object	        TYPE REF TO if_enh_object.
  DATA o_gen          TYPE REF TO if_enh_tool.
  DATA txt_id         TYPE enhdocuobject.
*  FIELD-SYMBOLS: &lt;b&gt; LIKE LINE OF s_comp-def_data.

  ASSERT raw_object IS BOUND.
  s_comp = raw_object-&gt;to_data( ).

* Check for existence &amp; Delete if needed
  object ?= _load_enh_impl( name = s_comp-header-enhspot
                         locking = abap_true ).
  IF object IS BOUND.
    object-&gt;delete( run_dark = abap_true ).
    object-&gt;unlock( ).
  ENDIF.

  cl_enh_factory=&gt;create_enhancement( EXPORTING enhname = s_comp-header-enhspot
* From CL_ENH_TOOL_BADI_DEF=&gt;IF_ENH_SPOT_TOOL~IMPLEMENT
                                                enhtype = CL_ABSTRACT_ENH_TOOL_REDEF=&gt;CREDEFINITION
                                            enhtooltype = cl_enh_tool_badi_def=&gt;tooltype
                                                   dark = abap_true
                                  IMPORTING enhancement = o_gen ).
  sap_object ?= o_gen.
*  LOOP AT s_comp-def_data ASSIGNING &lt;b&gt;.
*    sap_object-&gt;add_badi_def( &lt;b&gt; ).
*  ENDLOOP.</SOURCE>
    </ITEM>
    <ITEM CMPNAME="REVERSE_ENH_SPOT" VERSION="1" STATE="1" EDITORDER="3 " AUTHOR="TBENSIAL" CREATEDON="20110713" R3RELEASE="701">
     <TEXTS>
      <ITEM LANG="E" TEXT="Convert Enhancement Spot RAW data to SAP object"/>
     </TEXTS>
     <PARAMETERS>
      <ITEM SCONAME="COMPONENTS_LIST" VERSION="1" CMPTYPE="1" EDITORDER="2 " AUTHOR="TBENSIAL" CREATEDON="20110713" CHANGEDBY="TBENSIAL" CHANGEDON="20110713" PARPASSTYP="1" TYPTYPE="1" TYPE="TO_LIST"/>
      <ITEM SCONAME="OFF_SUB_COMPONENTS" VERSION="1" CMPTYPE="1" EDITORDER="1 " AUTHOR="TBENSIAL" CREATEDON="20110713" CHANGEDBY="TBENSIAL" CHANGEDON="20110713" PARPASSTYP="1" TYPTYPE="1" TYPE="TD_WITH_SUBCOMP" PAROPTIONL="X">
       <TEXTS>
        <ITEM LANG="E" TEXT="OFF Composite Enhancement Spot"/>
       </TEXTS>
      </ITEM>
      <ITEM SCONAME="RAW_OBJECT" VERSION="1" CMPTYPE="1" EDITORDER="3 " AUTHOR="TBENSIAL" CREATEDON="20110713" CHANGEDBY="TBENSIAL" CHANGEDON="20110713" PARPASSTYP="1" TYPTYPE="1" TYPE="TO_ENH_SPOT">
       <TEXTS>
        <ITEM LANG="E" TEXT="Data for Composit Enhancement Spot"/>
       </TEXTS>
      </ITEM>
      <ITEM SCONAME="SAP_OBJECT" VERSION="1" CMPTYPE="1" EDITORDER="4 " AUTHOR="TBENSIAL" CREATEDON="20110713" CHANGEDBY="TBENSIAL" CHANGEDON="20110713" PARDECLTYP="3" TYPTYPE="1" TYPE="TO_ENH_SPOT_SAP">
       <TEXTS>
        <ITEM LANG="E" TEXT="Enhancement Tool BAdI"/>
       </TEXTS>
      </ITEM>
     </PARAMETERS>
     <SOURCE>`
  DATA s_comp         TYPE zaplink_enhs_data=&gt;ts_fm_data.
  DATA o_gen          TYPE REF TO if_enh_spot_tool.
  DATA txt_id         TYPE enhdocuobject.
  FIELD-SYMBOLS: &lt;b&gt; LIKE LINE OF s_comp-def_data.

  ASSERT raw_object IS BOUND.
  s_comp = raw_object-&gt;to_data( ).
  cl_enh_factory=&gt;create_enhancement_spot( EXPORTING spot_name = s_comp-header-name
                                                      tooltype = cl_enh_tool_badi_def=&gt;tooltype
                                                          dark = abap_true
                                           IMPORTING spot = o_gen ).
  sap_object ?= o_gen.
  LOOP AT s_comp-def_data ASSIGNING &lt;b&gt;.
    sap_object-&gt;add_badi_def( &lt;b&gt; ).
  ENDLOOP.
*  txt_id = sap_object-&gt;get_longtext_id( ).</SOURCE>
    </ITEM>
    <ITEM CMPNAME="REVERSE_RAW" VERSION="1" STATE="1" EDITORDER="1 " AUTHOR="TBENSIAL" CREATEDON="20110713" R3RELEASE="701">
     <TEXTS>
      <ITEM LANG="E" TEXT="Convert Enhancement RAW data to SAP object"/>
     </TEXTS>
     <PARAMETERS>
      <ITEM SCONAME="COMPONENTS_LIST" VERSION="1" CMPTYPE="1" EDITORDER="2 " AUTHOR="TBENSIAL" CREATEDON="20110713" PARPASSTYP="1" TYPTYPE="1" TYPE="TO_LIST"/>
      <ITEM SCONAME="NAME" VERSION="1" CMPTYPE="1" EDITORDER="4 " AUTHOR="TBENSIAL" CREATEDON="20110713" PARPASSTYP="1" TYPTYPE="1" TYPE="TD_COMPNAME">
       <TEXTS>
        <ITEM LANG="E" TEXT="Component name"/>
       </TEXTS>
      </ITEM>
      <ITEM SCONAME="OFF_SUB_COMPONENTS" VERSION="1" CMPTYPE="1" EDITORDER="1 " AUTHOR="TBENSIAL" CREATEDON="20110713" PARPASSTYP="1" TYPTYPE="1" TYPE="TD_WITH_SUBCOMP" PAROPTIONL="X">
       <TEXTS>
        <ITEM LANG="E" TEXT="OFF Composite Enhancement Spot"/>
       </TEXTS>
      </ITEM>
      <ITEM SCONAME="RAW_OBJECT" VERSION="1" CMPTYPE="1" EDITORDER="3 " AUTHOR="TBENSIAL" CREATEDON="20110713" CHANGEDBY="TBENSIAL" CHANGEDON="20110713" PARPASSTYP="1" TYPTYPE="1" TYPE="TO_RAW_DATA"/>
      <ITEM SCONAME="SAP_OBJECT" VERSION="1" CMPTYPE="1" EDITORDER="5 " AUTHOR="TBENSIAL" CREATEDON="20110713" CHANGEDBY="TBENSIAL" CHANGEDON="20110713" PARDECLTYP="3" TYPTYPE="1" TYPE="TO_ENHANCEMENT_SAP">
       <TEXTS>
        <ITEM LANG="E" TEXT="General Methods for Enhancement Objects"/>
       </TEXTS>
      </ITEM>
     </PARAMETERS>
     <SOURCE>`
  DATA o_ces      TYPE to_comp_enh_spot.
  DATA o_es       TYPE to_enh_spot.
  DATA o_cei      TYPE to_comp_enh_impl.
  DATA o_ei       TYPE to_enh_impl.

* Composit Enhancement Spot
  TRY.
      o_ces ?= raw_object.
      o_ces-&gt;a0_maindata-enhspotcomposite = name.
      sap_object = reverse_comp_enh_spot( raw_object = o_ces
*                                      sub_components = sub_components
                                     components_list = components_list ).
    CATCH cx_sy_move_cast_error.    &quot; Wrong Type
  ENDTRY.
  CHECK sap_object IS NOT BOUND.

* Enhancement Spot
  TRY.
      o_es ?= raw_object.
      o_es-&gt;a0_maindata-name = name.
      sap_object = reverse_enh_spot( raw_object = o_es
*                                 sub_components = sub_components
                                components_list = components_list ).
    CATCH cx_sy_move_cast_error.    &quot; Wrong Type
  ENDTRY.
  CHECK sap_object IS NOT BOUND.

* Composit Enhancement Implementation
  TRY.
      o_cei ?= raw_object.
      o_cei-&gt;a0_maindata-enhcomposite = name.
      sap_object = reverse_comp_enh_impl( raw_object = o_cei
*                                      sub_components = sub_components
                                     components_list = components_list ).
    CATCH cx_sy_move_cast_error.    &quot; Wrong Type
  ENDTRY.
  CHECK sap_object IS NOT BOUND.

* Enhancement Implementation
  TRY.
      o_ei ?= raw_object.
      o_ei-&gt;a0_maindata-enhspot = name.
      sap_object = reverse_enh_impl( raw_object = o_ei
*                                 sub_components = sub_components
                                components_list = components_list ).
    CATCH cx_sy_move_cast_error.    &quot; Wrong Type
  ENDTRY.
  ASSERT raw_object IS BOUND.</SOURCE>
    </ITEM>
    <ITEM CMPNAME="SET_SOTR" VERSION="1" EXPOSURE="1" STATE="1" EDITORDER="1 " AUTHOR="TBENSIAL" CREATEDON="20110831" CHANGEDBY="TBENSIAL" CHANGEDON="20110831">
     <TEXTS>
      <ITEM LANG="E" TEXT="Write SOTR from text table"/>
     </TEXTS>
     <PARAMETERS>
      <ITEM SCONAME="SOTR" VERSION="1" CMPTYPE="1" EDITORDER="1 " AUTHOR="TBENSIAL" CREATEDON="20110831" CHANGEDBY="TBENSIAL" CHANGEDON="20110831" PARPASSTYP="1" TYPTYPE="1" TYPE="TS_SOTR">
       <TEXTS>
        <ITEM LANG="E" TEXT="SOTR IDs (Short &amp; Long)"/>
       </TEXTS>
      </ITEM>
      <ITEM SCONAME="TEXTS" VERSION="1" CMPTYPE="1" EDITORDER="2 " AUTHOR="TBENSIAL" CREATEDON="20110831" CHANGEDBY="TBENSIAL" CHANGEDON="20110831" PARPASSTYP="1" TYPTYPE="1" TYPE="TT_LTEXTS"/>
     </PARAMETERS>
     <SOURCE>`
  DATA _txt     TYPE string.
  DATA s_pack   TYPE devclass.
  DATA l_pack   TYPE devclass.
  DATA s_type   TYPE trobjtype.
  DATA l_type   TYPE trobjtype.
  FIELD-SYMBOLS: &lt;t&gt; LIKE LINE OF texts.

  DATA entry    TYPE sotr_text.

  SELECT SINGLE h~paket u~object        &quot; See note 1481544
    INTO (s_pack, s_type)
    FROM sotr_head AS h INNER JOIN sotr_use AS u ON u~concept = h~concept
    WHERE h~concept = sotr-short.
  SELECT SINGLE h~paket u~object
    INTO (l_pack, l_type)
    FROM sotr_head AS h INNER JOIN sotr_use AS u ON u~concept = h~concept
    WHERE h~concept = sotr-long.
  IF sy-subrc &lt;&gt; 0.   l_pack = s_pack.    l_type = s_type.    ENDIF.

  IF sotr-short IS NOT INITIAL.
    CALL FUNCTION &apos;BTFR_MAINTAIN_SINGLE_TEXT&apos;
      EXPORTING
        package                            = s_pack
        object_type                        = s_type
        langu                              = sy-langu    &quot;master lang
        concept                            = sotr-short
*         ALIAS                              =
*         TRANSL_TYPE                        =
*         FLAG_STRING                        =
*         OPTIONS_EDITOR                     =
*         OPTIONS_CHECK                      =
*         FLAG_NO_CONTEXT                    =
*         FLAG_DISPLAY                       =
        flag_no_screen                     = abap_true
*         FLAG_CALLED_FROM_EDIT_SCREEN       =
        default_text                       = ` `
        flag_correction_entry              = abap_false
*         CORR_NUM                           =
*         USE_KORRNUM_IMMEDIATEDLY           =
*       IMPORTING
*         FLAG_CANCELLED                     =
*         HEADER                             =
*         TEXT                               =
*         STRING                             =
      EXCEPTIONS
        parameter_error                    = 1
        text_not_found                     = 2
        invalid_object_type                = 3
        invalid_package                    = 4
        header_diff_interface              = 5
        invalid_tadir_entry                = 6
        invalid_transl_type                = 7
        invalid_concept                    = 8
        OTHERS                             = 9.
    IF sy-subrc &lt;&gt; 0.
      mac_raise_mf &apos;BTFR_MAINTAIN_SINGLE_TEXT&apos; sy-subrc.
    ENDIF.
  ENDIF.

  IF sotr-long IS NOT INITIAL.
    CALL FUNCTION &apos;BTFR_MAINTAIN_SINGLE_TEXT&apos;
      EXPORTING
        package                            = l_pack
        object_type                        = l_type
        langu                              = sy-langu    &quot; master lang
        concept                            = sotr-long
*         ALIAS                              =
*         TRANSL_TYPE                        =
        flag_string                        = abap_true
*         OPTIONS_EDITOR                     =
*         OPTIONS_CHECK                      =
*         FLAG_NO_CONTEXT                    =
*         FLAG_DISPLAY                       =
        flag_no_screen                     = abap_true
*         FLAG_CALLED_FROM_EDIT_SCREEN       =
        default_text                       = ` `
        flag_correction_entry              = abap_false
*         CORR_NUM                           =
*         USE_KORRNUM_IMMEDIATEDLY           =
*       IMPORTING
*         FLAG_CANCELLED                     =
*         HEADER                             =
*         TEXT                               =
*         STRING                             =
      EXCEPTIONS
        parameter_error                    = 1
        text_not_found                     = 2
        invalid_object_type                = 3
        invalid_package                    = 4
        header_diff_interface              = 5
        invalid_tadir_entry                = 6
        invalid_transl_type                = 7
        invalid_concept                    = 8
        OTHERS                             = 9.
    IF sy-subrc &lt;&gt; 0.
      mac_raise_mf &apos;BTFR_MAINTAIN_SINGLE_TEXT&apos; sy-subrc.
    ENDIF.
  ENDIF.



  LOOP AT texts ASSIGNING &lt;t&gt;.
    IF &lt;t&gt;-text IS NOT INITIAL.
*      IF &lt;t&gt;-lang = sy-lang.
*        clear entry.
*        entry-concept = sotr-short.
*        CALL FUNCTION &apos;SOTR_UPDATE_CONCEPT_ENTRY&apos;
*          EXPORTING
*            entry                       = entry
*            SOURCE_LANGU                = &lt;t&gt;-lang
*            CHECK_MASTER_LANGU          = abap_false
**         IN_UPDATE_TASK              =
**         FLAG_CORRECTION_ENTRY       =
*          EXCEPTIONS
*            CONCEPT_NOT_FOUND           = 1
*            ENTRY_NOT_FOUND             = 2
*            LANGU_MISSING               = 3
*            NO_MASTER_LANGU             = 4
*            ERROR_IN_CORRECTION         = 5
*            USER_CANCELLED              = 6
*            OTHERS                      = 7.
*        IF sy-subrc &lt;&gt; 0.
** MESSAGE ID SY-MSGID TYPE SY-MSGTY NUMBER SY-MSGNO
**         WITH SY-MSGV1 SY-MSGV2 SY-MSGV3 SY-MSGV4.
*        ENDIF.
*      ELSE.
      CLEAR entry.
      entry-langu = &lt;t&gt;-lang.
      entry-text = &lt;t&gt;-text.
      CALL FUNCTION &apos;SOTR_INSERT_CONCEPT_ENTRY&apos;
        EXPORTING
          concept                             = sotr-short
*            SOURCE_LANGU                        = &lt;t&gt;-lang
          check_master_langu                  = abap_false
          check_master_system                 = abap_false
*           CHECK_CONCEPT_EXIST                 = &apos;X&apos;
*           IN_UPDATE_TASK                      =
*           UPDATE_CONTEXT_FLAG                 = &apos;X&apos;
*           FLAG_CORRECTION_ENTRY               =
        CHANGING
          entry                               = entry
*         EXCEPTIONS
*           CONCEPT_NOT_FOUND                   = 1
*           IDENTICAL_CONTEXT_NOT_ALLOWED       = 2
*           TEXT_TOO_LONG                       = 3
*           LANGU_MISSING                       = 4
*           NO_MASTER_LANGU                     = 5
*           ERROR_IN_UPDATE                     = 6
*           ERROR_IN_CORRECTION                 = 7
*           USER_CANCELLED                      = 8
*           OTHERS                              = 9
                .
      IF sy-subrc &lt;&gt; 0.
* MESSAGE ID SY-MSGID TYPE SY-MSGTY NUMBER SY-MSGNO
*         WITH SY-MSGV1 SY-MSGV2 SY-MSGV3 SY-MSGV4.
      ENDIF.

*      ENDIF.

*      _txt = &lt;t&gt;-text.
*      CALL FUNCTION &apos;BTFR_MAINTAIN_SINGLE_TEXT&apos;
*        EXPORTING
*          package                            = s_pack
*          object_type                        = s_type
*          langu                              = &lt;t&gt;-lang
*          concept                            = sotr-short
**         ALIAS                              =
**         TRANSL_TYPE                        =
**         FLAG_STRING                        =
**         OPTIONS_EDITOR                     =
**         OPTIONS_CHECK                      =
**         FLAG_NO_CONTEXT                    =
**         FLAG_DISPLAY                       =
*          flag_no_screen                     = abap_true
**         FLAG_CALLED_FROM_EDIT_SCREEN       =
*          default_text                       = _txt
*          flag_correction_entry              = abap_false
**         CORR_NUM                           =
**         USE_KORRNUM_IMMEDIATEDLY           =
**       IMPORTING
**         FLAG_CANCELLED                     =
**         HEADER                             =
**         TEXT                               =
**         STRING                             =
*        EXCEPTIONS
*          parameter_error                    = 1
*          text_not_found                     = 2
*          invalid_object_type                = 3
*          invalid_package                    = 4
*          header_diff_interface              = 5
*          invalid_tadir_entry                = 6
*          invalid_transl_type                = 7
*          invalid_concept                    = 8
*          OTHERS                             = 9.
*      IF sy-subrc &lt;&gt; 0.
*        mac_raise_mf &apos;BTFR_MAINTAIN_SINGLE_TEXT&apos; sy-subrc.
*      ENDIF.
    ENDIF.
    IF &lt;t&gt;-_ IS NOT INITIAL.
      _txt = &lt;t&gt;-_.
*      CALL FUNCTION &apos;BTFR_MAINTAIN_SINGLE_TEXT&apos;
*        EXPORTING
*          package                            = l_pack
*          object_type                        = l_type
*          langu                              = &lt;t&gt;-lang
*          concept                            = sotr-long
**         ALIAS                              =
**         TRANSL_TYPE                        =
**         FLAG_STRING                        =
**         OPTIONS_EDITOR                     =
**         OPTIONS_CHECK                      =
**         FLAG_NO_CONTEXT                    =
**         FLAG_DISPLAY                       =
*          flag_no_screen                     = abap_true
**         FLAG_CALLED_FROM_EDIT_SCREEN       =
*          default_text                       = _txt
*          flag_correction_entry              = abap_false
**         CORR_NUM                           =
**         USE_KORRNUM_IMMEDIATEDLY           =
**       IMPORTING
**         FLAG_CANCELLED                     =
**         HEADER                             =
**         TEXT                               =
**         STRING                             =
*        EXCEPTIONS
*          parameter_error                    = 1
*          text_not_found                     = 2
*          invalid_object_type                = 3
*          invalid_package                    = 4
*          header_diff_interface              = 5
*          invalid_tadir_entry                = 6
*          invalid_transl_type                = 7
*          invalid_concept                    = 8
*          OTHERS                             = 9.
*      IF sy-subrc &lt;&gt; 0.
*        mac_raise_mf &apos;BTFR_MAINTAIN_SINGLE_TEXT&apos; sy-subrc.
*      ENDIF.
    ENDIF.
  ENDLOOP.</SOURCE>
    </ITEM>
    <ITEM CMPNAME="_COMP_ENH_IMPL_EXISTS" VERSION="1" STATE="1" EDITORDER="30 " AUTHOR="TBENSIAL" CREATEDON="20110829" R3RELEASE="701">
     <TEXTS>
      <ITEM LANG="E" TEXT="Check Composit Enhancement Implementation exists"/>
     </TEXTS>
     <PARAMETERS>
      <ITEM SCONAME="EXISTS" VERSION="1" CMPTYPE="1" EDITORDER="2 " AUTHOR="TBENSIAL" CREATEDON="20110829" PARDECLTYP="3" TYPTYPE="1" TYPE="TD_COMPEXISTS"/>
      <ITEM SCONAME="NAME" VERSION="1" CMPTYPE="1" EDITORDER="1 " AUTHOR="TBENSIAL" CREATEDON="20110829" PARPASSTYP="1" TYPTYPE="1" TYPE="TD_COMP_ENH_IMPL_NAME">
       <TEXTS>
        <ITEM LANG="E" TEXT="ID of a Composite Enhancement Implementation"/>
       </TEXTS>
      </ITEM>
     </PARAMETERS>
     <SOURCE>`
  DATA d_name         TYPE td_compname.
  exists = me-&gt;exists-not_exists.
  SELECT SINGLE enhcomposite INTO d_name
    FROM enhcompheader
    WHERE enhcomposite = name.
  CHECK sy-subrc = 0.
  exists = me-&gt;exists-exists.</SOURCE>
    </ITEM>
    <ITEM CMPNAME="_COMP_ENH_SPOT_EXISTS" VERSION="1" STATE="1" EDITORDER="28 " AUTHOR="TBENSIAL" CREATEDON="20110829" R3RELEASE="701">
     <TEXTS>
      <ITEM LANG="E" TEXT="Check Composit Enhancement Spot exists"/>
     </TEXTS>
     <PARAMETERS>
      <ITEM SCONAME="EXISTS" VERSION="1" CMPTYPE="1" EDITORDER="2 " AUTHOR="TBENSIAL" CREATEDON="20110829" PARDECLTYP="3" TYPTYPE="1" TYPE="TD_COMPEXISTS"/>
      <ITEM SCONAME="NAME" VERSION="1" CMPTYPE="1" EDITORDER="1 " AUTHOR="TBENSIAL" CREATEDON="20110829" PARPASSTYP="1" TYPTYPE="1" TYPE="TD_COMP_ENH_SPOT_NAME">
       <TEXTS>
        <ITEM LANG="E" TEXT="Composite Enhancement Spot"/>
       </TEXTS>
      </ITEM>
     </PARAMETERS>
     <SOURCE>`
  DATA d_name         TYPE td_compname.
  exists = me-&gt;exists-not_exists.
  SELECT SINGLE enhspotcomposite INTO d_name
    FROM enhspotcomphead
    WHERE enhspotcomposite = name.
  CHECK sy-subrc = 0.
  exists = me-&gt;exists-exists.</SOURCE>
    </ITEM>
    <ITEM CMPNAME="_ENH_IMPL_EXISTS" VERSION="1" STATE="1" EDITORDER="29 " AUTHOR="TBENSIAL" CREATEDON="20110829" R3RELEASE="701">
     <TEXTS>
      <ITEM LANG="E" TEXT="Check Enhancement Implementation exists"/>
     </TEXTS>
     <PARAMETERS>
      <ITEM SCONAME="EXISTS" VERSION="1" CMPTYPE="1" EDITORDER="2 " AUTHOR="TBENSIAL" CREATEDON="20110829" PARDECLTYP="3" TYPTYPE="1" TYPE="TD_COMPEXISTS"/>
      <ITEM SCONAME="NAME" VERSION="1" CMPTYPE="1" EDITORDER="1 " AUTHOR="TBENSIAL" CREATEDON="20110829" CHANGEDBY="TBENSIAL" CHANGEDON="20110829" PARPASSTYP="1" TYPTYPE="1" TYPE="TD_ENH_IMPL_NAME">
       <TEXTS>
        <ITEM LANG="E" TEXT="Enhancement Implementation"/>
       </TEXTS>
      </ITEM>
     </PARAMETERS>
     <SOURCE>`
  DATA d_name         TYPE td_compname.
  exists = me-&gt;exists-not_exists.
  SELECT SINGLE enhname INTO d_name
    FROM enhheader
    WHERE enhname = name.
  CHECK sy-subrc = 0.
  exists = me-&gt;exists-exists.</SOURCE>
    </ITEM>
    <ITEM CMPNAME="_ENH_SPOT_EXISTS" VERSION="1" STATE="1" EDITORDER="27 " AUTHOR="TBENSIAL" CREATEDON="20110829" CHANGEDBY="TBENSIAL" CHANGEDON="20110829" R3RELEASE="701">
     <TEXTS>
      <ITEM LANG="E" TEXT="Checkk Enhancement Spot exists"/>
     </TEXTS>
     <PARAMETERS>
      <ITEM SCONAME="EXISTS" VERSION="1" CMPTYPE="1" EDITORDER="2 " AUTHOR="TBENSIAL" CREATEDON="20110829" CHANGEDBY="TBENSIAL" CHANGEDON="20110829" PARDECLTYP="3" TYPTYPE="1" TYPE="TD_COMPEXISTS"/>
      <ITEM SCONAME="NAME" VERSION="1" CMPTYPE="1" EDITORDER="1 " AUTHOR="TBENSIAL" CREATEDON="20110829" CHANGEDBY="TBENSIAL" CHANGEDON="20110829" PARPASSTYP="1" TYPTYPE="1" TYPE="TD_ENH_SPOT_NAME">
       <TEXTS>
        <ITEM LANG="E" TEXT="Name (ID) of an Enhancement Spot"/>
       </TEXTS>
      </ITEM>
     </PARAMETERS>
     <SOURCE>`
  DATA d_name         TYPE td_compname.
  exists = me-&gt;exists-not_exists.
  SELECT SINGLE enhspot INTO d_name
    FROM enhspotheader
    WHERE enhspot = name.
  CHECK sy-subrc = 0.
  exists = me-&gt;exists-exists.</SOURCE>
    </ITEM>
    <ITEM CMPNAME="_LOAD_COMP_ENH_IMPL" VERSION="1" STATE="1" EDITORDER="25 " AUTHOR="TBENSIAL" CREATEDON="20110629" CHANGEDBY="TBENSIAL" CHANGEDON="20110713" R3RELEASE="701">
     <TEXTS>
      <ITEM LANG="E" TEXT="Load Composit Enhancement Implementation as SAP object (w n)"/>
     </TEXTS>
     <PARAMETERS>
      <ITEM SCONAME="LOCKING" VERSION="1" CMPTYPE="1" EDITORDER="3 " AUTHOR="TBENSIAL" CREATEDON="20110812" PARPASSTYP="1" TYPTYPE="1" TYPE="ENHBOOLEAN" PAROPTIONL="X">
       <TEXTS>
        <ITEM LANG="E" TEXT="Enhancement Boolean"/>
       </TEXTS>
      </ITEM>
      <ITEM SCONAME="NAME" VERSION="1" CMPTYPE="1" EDITORDER="1 " AUTHOR="TBENSIAL" CREATEDON="20110629" CHANGEDBY="TBENSIAL" CHANGEDON="20110629" PARPASSTYP="1" TYPTYPE="1" TYPE="TD_COMP_ENH_IMPL_NAME">
       <TEXTS>
        <ITEM LANG="E" TEXT="ID of a Composite Enhancement Implementation"/>
       </TEXTS>
      </ITEM>
      <ITEM SCONAME="OBJECT" VERSION="1" CMPTYPE="1" EDITORDER="2 " AUTHOR="TBENSIAL" CREATEDON="20110629" CHANGEDBY="TBENSIAL" CHANGEDON="20110629" PARDECLTYP="3" TYPTYPE="1" TYPE="TO_COMP_ENH_IMPL_SAP">
       <TEXTS>
        <ITEM LANG="E" TEXT="Enhancement Composite"/>
       </TEXTS>
      </ITEM>
     </PARAMETERS>
     <SOURCE>`
  IF _comp_enh_impl_exists( name ) = abap_true.
    object ?= cl_enh_factory=&gt;load_enhancement_composite( name = name
                                                          lock = locking
                                                      run_dark = abap_true ).
  ENDIF.</SOURCE>
    </ITEM>
    <ITEM CMPNAME="_LOAD_COMP_ENH_SPOT" VERSION="1" STATE="1" EDITORDER="23 " AUTHOR="TBENSIAL" CREATEDON="20110629" CHANGEDBY="TBENSIAL" CHANGEDON="20110831" MTDNEWEXC="X" R3RELEASE="701">
     <TEXTS>
      <ITEM LANG="E" TEXT="Load Composit Enhancement Spot as SAP object (from name)"/>
     </TEXTS>
     <PARAMETERS>
      <ITEM SCONAME="LOCKING" VERSION="1" CMPTYPE="1" EDITORDER="3 " AUTHOR="TBENSIAL" CREATEDON="20110812" PARPASSTYP="1" TYPTYPE="1" TYPE="ENHBOOLEAN" PAROPTIONL="X">
       <TEXTS>
        <ITEM LANG="E" TEXT="Enhancement Boolean"/>
       </TEXTS>
      </ITEM>
      <ITEM SCONAME="NAME" VERSION="1" CMPTYPE="1" EDITORDER="1 " AUTHOR="TBENSIAL" CREATEDON="20110629" PARPASSTYP="1" TYPTYPE="1" TYPE="TD_COMP_ENH_SPOT_NAME">
       <TEXTS>
        <ITEM LANG="E" TEXT="Composite Enhancement Spot"/>
       </TEXTS>
      </ITEM>
      <ITEM SCONAME="OBJECT" VERSION="1" CMPTYPE="1" EDITORDER="2 " AUTHOR="TBENSIAL" CREATEDON="20110629" PARDECLTYP="3" TYPTYPE="1" TYPE="TO_COMP_ENH_SPOT_SAP">
       <TEXTS>
        <ITEM LANG="E" TEXT="Enhancement Composite"/>
       </TEXTS>
      </ITEM>
     </PARAMETERS>
     <EXCEPTIONS>
      <ITEM SCONAME="ZAPLINK_CX_CONNECTOR" VERSION="1" LANGU="E" EDITORDER="1 " AUTHOR="TBENSIAL" CREATEDON="20110831">
       <TEXTS>
        <ITEM LANG="E" TEXT="ZAPlink ROOT Exception for Connectors"/>
       </TEXTS>
      </ITEM>
     </EXCEPTIONS>
     <SOURCE>`
  DATA o_root         TYPE REF TO cx_root.
  IF _comp_enh_spot_exists( name ) = abap_true.
    TRY.
        object ?= cl_enh_factory=&gt;load_enhancement_spot_comp( name = name
                                                              lock = locking
                                                          run_dark = abap_true ).

*     CATCH cx_enh_io_error .
*     CATCH cx_enh_internal_error .
      CATCH cx_enh_permission_denied INTO o_root.
      CATCH cx_enh_is_locked INTO o_root.
      CATCH cx_enh_canceled INTO o_root.
    ENDTRY.
    IF o_root IS BOUND.
      mac_cascade_raise o_mycx o_root.
    ENDIF.
  ENDIF.</SOURCE>
    </ITEM>
    <ITEM CMPNAME="_LOAD_ENH_IMPL" VERSION="1" STATE="1" EDITORDER="24 " AUTHOR="TBENSIAL" CREATEDON="20110629" CHANGEDBY="TBENSIAL" CHANGEDON="20110713" R3RELEASE="701">
     <TEXTS>
      <ITEM LANG="E" TEXT="Load Enhancement Implementation as SAP object (from name)"/>
     </TEXTS>
     <PARAMETERS>
      <ITEM SCONAME="LOCKING" VERSION="1" CMPTYPE="1" EDITORDER="3 " AUTHOR="TBENSIAL" CREATEDON="20110812" PARPASSTYP="1" TYPTYPE="1" TYPE="ENHBOOLEAN" PAROPTIONL="X">
       <TEXTS>
        <ITEM LANG="E" TEXT="Enhancement Boolean"/>
       </TEXTS>
      </ITEM>
      <ITEM SCONAME="NAME" VERSION="1" CMPTYPE="1" EDITORDER="1 " AUTHOR="TBENSIAL" CREATEDON="20110629" PARPASSTYP="1" TYPTYPE="1" TYPE="TD_ENH_IMPL_NAME">
       <TEXTS>
        <ITEM LANG="E" TEXT="Enhancement Implementation"/>
       </TEXTS>
      </ITEM>
      <ITEM SCONAME="OBJECT" VERSION="1" CMPTYPE="1" EDITORDER="2 " AUTHOR="TBENSIAL" CREATEDON="20110629" PARDECLTYP="3" TYPTYPE="1" TYPE="TO_ENH_IMPL_SAP">
       <TEXTS>
        <ITEM LANG="E" TEXT="Enhancement Tool Redefinition BAdI"/>
       </TEXTS>
      </ITEM>
     </PARAMETERS>
     <SOURCE>`
  IF _enh_impl_exists( name ) = abap_true.
    object ?= cl_enh_factory=&gt;get_enhancement( enhancement_id = name
                                                         lock = locking
                                                     run_dark = abap_true ).
  ENDIF.</SOURCE>
    </ITEM>
    <ITEM CMPNAME="_LOAD_ENH_SPOT" VERSION="1" STATE="1" EDITORDER="22 " AUTHOR="TBENSIAL" CREATEDON="20110629" CHANGEDBY="TBENSIAL" CHANGEDON="20110713" R3RELEASE="701">
     <TEXTS>
      <ITEM LANG="E" TEXT="Load Enhancement Spot as SAP object (from name)"/>
     </TEXTS>
     <PARAMETERS>
      <ITEM SCONAME="LOCKING" VERSION="1" CMPTYPE="1" EDITORDER="2 " AUTHOR="TBENSIAL" CREATEDON="20110812" CHANGEDBY="TBENSIAL" CHANGEDON="20110829" PARPASSTYP="1" TYPTYPE="1" TYPE="ENHBOOLEAN" PAROPTIONL="X">
       <TEXTS>
        <ITEM LANG="E" TEXT="Enhancement Boolean"/>
       </TEXTS>
      </ITEM>
      <ITEM SCONAME="NAME" VERSION="1" CMPTYPE="1" EDITORDER="1 " AUTHOR="TBENSIAL" CREATEDON="20110629" CHANGEDBY="TBENSIAL" CHANGEDON="20110829" PARPASSTYP="1" TYPTYPE="1" TYPE="TD_ENH_SPOT_NAME">
       <TEXTS>
        <ITEM LANG="E" TEXT="Enhancement Spot"/>
       </TEXTS>
      </ITEM>
      <ITEM SCONAME="OBJECT" VERSION="1" CMPTYPE="1" EDITORDER="3 " AUTHOR="TBENSIAL" CREATEDON="20110629" CHANGEDBY="TBENSIAL" CHANGEDON="20110829" PARDECLTYP="3" TYPTYPE="1" TYPE="TO_ENH_SPOT_SAP">
       <TEXTS>
        <ITEM LANG="E" TEXT="Enhancement Tool BAdI"/>
       </TEXTS>
      </ITEM>
     </PARAMETERS>
     <SOURCE>`
  IF _enh_spot_exists( name ) = abap_true.
    object ?= cl_enh_factory=&gt;get_enhancement_spot( spot_name = name
                                                         lock = locking
                                                     run_dark = abap_true ).
  ENDIF.</SOURCE>
    </ITEM>
   </METHODS>
   <REDEFINITIONS>
    <ITEM REFCLSNAME="ZAPLINK_CONNECTOR_" VERSION="1" MTDNAME="ZAPLINK_CONNECTOR~CREATE_NEW_RAW">
     <SOURCE>`
  DATA o_conn   TYPE to_connector.
  DATA o_ces    TYPE to_comp_enh_spot.
  DATA o_es     TYPE to_enh_spot.
  DATA o_ei     TYPE to_enh_impl.
  DATA o_cei    TYPE to_comp_enh_impl.

  CREATE OBJECT object.
  CASE type.
    WHEN st_enh_spot.
      CREATE OBJECT o_es.
      object-&gt;raw = o_es.
    WHEN st_comp_enh_spot.
      CREATE OBJECT o_ces.
      object-&gt;raw = o_ces.
    WHEN st_enh_impl.
      CREATE OBJECT o_ei.
      object-&gt;raw = o_ei.
    WHEN st_comp_enh_impl.
      CREATE OBJECT o_cei.
      object-&gt;raw = o_cei.
    WHEN OTHERS.
      CLEAR object.
      mac_raise_type_not_supported me-&gt;class_name type.
  ENDCASE.</SOURCE>
    </ITEM>
    <ITEM REFCLSNAME="ZAPLINK_CONNECTOR_" VERSION="1" MTDNAME="ZAPLINK_CONNECTOR~DELETE_FROM_SAP">
     <SOURCE>`
  DATA o_enh          TYPE to_enhancement_sap.
  DATA o_root         TYPE REF TO cx_root.

  TRY.
      o_enh = load_enhancement( component = component
                                  locking = abap_true ).
      o_enh-&gt;delete( run_dark = abap_true ).
      result = abap_true.
*cx_enh_mod_not_allowed
*cx_enh_permission_denied
*cx_enh_canceled
*cx_enh_internal_error
*cx_enh_is_locked
*cx_enh_io_error
*cx_enh_composite_not_empty
    CATCH cx_root INTO o_root.
      mac_cascade_raise o_mycx o_root.
  ENDTRY.</SOURCE>
    </ITEM>
    <ITEM REFCLSNAME="ZAPLINK_CONNECTOR_" VERSION="1" MTDNAME="ZAPLINK_CONNECTOR~DO_EXISTS">
     <SOURCE>`
  DATA d_type             TYPE td_comptype.
  DATA d_name             TYPE td_compname.
  DATA n_enh_spot         TYPE td_enh_spot_name.
  DATA n_comp_enh_spot    TYPE td_comp_enh_spot_name.
  DATA n_enh_impl         TYPE td_enh_impl_name.
  DATA n_comp_enh_impl    TYPE td_comp_enh_spot_name.

  exists = me-&gt;exists-not_exists.
*  TRY.
  d_type = component-&gt;get_type( ).
  d_name = component-&gt;get_name( ).
  CASE d_type.
    WHEN st_enh_spot.
      n_enh_spot = d_name.
      exists = _enh_spot_exists( n_enh_spot ).
    WHEN st_comp_enh_spot.
      n_comp_enh_spot = d_name.
      exists = _comp_enh_spot_exists( n_comp_enh_spot ).
    WHEN st_enh_impl.
      n_enh_impl = d_name.
      exists = _enh_impl_exists( n_enh_impl ).
    WHEN st_comp_enh_impl.
      n_comp_enh_impl = d_name.
      exists = _comp_enh_impl_exists( n_comp_enh_impl ).
    WHEN OTHERS.
      mac_raise_type_not_supported me-&gt;class_name d_type.
  ENDCASE.
*    mac_def_catch zaplink_cx_connector.
*  ENDTRY.</SOURCE>
    </ITEM>
    <ITEM REFCLSNAME="ZAPLINK_CONNECTOR_" VERSION="1" MTDNAME="ZAPLINK_CONNECTOR~IS_SUPPORTED_VERSION">
     <SOURCE>`
  result = abap_false.
  if version = _ver.    result = abap_true.   endif.</SOURCE>
    </ITEM>
    <ITEM REFCLSNAME="ZAPLINK_CONNECTOR_" VERSION="1" MTDNAME="ZAPLINK_CONNECTOR~READ_FROM_SAP">
     <SOURCE>`
  DATA f_subcomp  TYPE td_with_subcomp.
  DATA o_list     TYPE to_list.
  DATA o_sap_intf TYPE to_enhancement_sap.

  CREATE OBJECT object.
  object-&gt;set_component( component ).

  TRY.
    o_sap_intf = load_enhancement( component ).
    ASSERT o_sap_intf is bound.

    f_subcomp = component-&gt;get_with_subcomp( ).
    CREATE OBJECT o_list.
    component-&gt;set_subcomponents( o_list ).

    object-&gt;raw = convert_enhancement( sap_object = o_sap_intf
                                   sub_components = f_subcomp
                                  components_list = o_list ).

    TRY.
        o_list-&gt;remove( component ).
      CATCH zaplink_cx_list.
    ENDTRY.

    object-&gt;update_connector_data( me ).
    mac_def_catch zaplink_cx_connector.
  ENDTRY.</SOURCE>
    </ITEM>
    <ITEM REFCLSNAME="ZAPLINK_CONNECTOR_" VERSION="1" MTDNAME="ZAPLINK_CONNECTOR~WRITE_TO_SAP">
     <SOURCE>`
  DATA o_sap_intf TYPE to_enhancement_sap.
  DATA o_err_list TYPE REF TO cl_wb_checklist.

  TRY.
    ASSERT object-&gt;raw IS BOUND.
    CREATE OBJECT components.
    o_sap_intf = reverse_raw( raw_object = object-&gt;raw
                                    name = object-&gt;name
*                          sub_components = f_subcomp
                         components_list = components ).
    o_sap_intf-&gt;check( EXPORTING    version = &apos;I&apos; &quot; Inactive
                        CHANGING error_list = o_err_list ).
    o_sap_intf-&gt;save( run_dark = abap_true ).
    mac_def_catch zaplink_cx_connector.
  ENDTRY.</SOURCE>
    </ITEM>
   </REDEFINITIONS>
   <TYPEGROUPS>
    <ITEM TYPEGROUP="SEEX" VERSION="1" EXPLICIT="X"/>
   </TYPEGROUPS>
   <TYPES>
    <ITEM CMPNAME="TD_COMP_ENH_IMPL_NAME" VERSION="1" STATE="1" EDITORDER="3 " AUTHOR="TBENSIAL" CREATEDON="20110629" TYPTYPE="1" TYPE="ENHCOMPOSITENAME" R3RELEASE="701">
     <TEXTS>
      <ITEM LANG="E" TEXT="ID of a Composite Enhancement Implementation"/>
     </TEXTS>
    </ITEM>
    <ITEM CMPNAME="TD_COMP_ENH_SPOT_NAME" VERSION="1" STATE="1" EDITORDER="1 " AUTHOR="TBENSIAL" CREATEDON="20110623" CHANGEDBY="TBENSIAL" CHANGEDON="20110629" TYPTYPE="1" TYPE="ENHSPOTCOMPOSITENAME">
     <TEXTS>
      <ITEM LANG="E" TEXT="Composite Enhancement Spot"/>
     </TEXTS>
    </ITEM>
    <ITEM CMPNAME="TD_ENH_IMPL_NAME" VERSION="1" STATE="1" EDITORDER="2 " AUTHOR="TBENSIAL" CREATEDON="20110629" CHANGEDBY="TBENSIAL" CHANGEDON="20110629" TYPTYPE="1" TYPE="ENHNAME">
     <TEXTS>
      <ITEM LANG="E" TEXT="ID of an Enhancement"/>
     </TEXTS>
    </ITEM>
    <ITEM CMPNAME="TD_ENH_SPOT_NAME" VERSION="1" STATE="1" EDITORDER="4 " AUTHOR="TBENSIAL" CREATEDON="20110624" CHANGEDBY="TBENSIAL" CHANGEDON="20110629" TYPTYPE="1" TYPE="ENHSPOTNAME">
     <TEXTS>
      <ITEM LANG="E" TEXT="Name (ID) of an Enhancement Spot"/>
     </TEXTS>
    </ITEM>
    <ITEM CMPNAME="TD_SOTR_CONCEPT" VERSION="1" EXPOSURE="1" STATE="1" EDITORDER="1 " AUTHOR="TBENSIAL" CREATEDON="20110831" TYPTYPE="1" TYPE="SOTR_TEXT-CONCEPT" R3RELEASE="701"/>
    <ITEM CMPNAME="TO_COMP_ENH_IMPL" VERSION="1" STATE="1" EDITORDER="12 " AUTHOR="TBENSIAL" CREATEDON="20110629" CHANGEDBY="TBENSIAL" CHANGEDON="20110629" TYPTYPE="3" TYPE="ZAPLINK_ENHC_DATA" R3RELEASE="701">
     <TEXTS>
      <ITEM LANG="E" TEXT="Data for Composit Enhancement Implementation"/>
     </TEXTS>
    </ITEM>
    <ITEM CMPNAME="TO_COMP_ENH_IMPL_SAP" VERSION="1" STATE="1" EDITORDER="13 " AUTHOR="TBENSIAL" CREATEDON="20110629" TYPTYPE="3" TYPE="CL_ENH_COMPOSITE" R3RELEASE="701">
     <TEXTS>
      <ITEM LANG="E" TEXT="Enhancement Composite"/>
     </TEXTS>
    </ITEM>
    <ITEM CMPNAME="TO_COMP_ENH_SPOT" VERSION="1" STATE="1" EDITORDER="5 " AUTHOR="TBENSIAL" CREATEDON="20110623" CHANGEDBY="TBENSIAL" CHANGEDON="20110629" TYPTYPE="3" TYPE="ZAPLINK_ENSC_DATA">
     <TEXTS>
      <ITEM LANG="E" TEXT="Data for Composit Enhancement Spot"/>
     </TEXTS>
    </ITEM>
    <ITEM CMPNAME="TO_COMP_ENH_SPOT_SAP" VERSION="1" STATE="1" EDITORDER="6 " AUTHOR="TBENSIAL" CREATEDON="20110623" CHANGEDBY="TBENSIAL" CHANGEDON="20110629" TYPTYPE="3" TYPE="CL_ENH_SPOT_COMPOSITE">
     <TEXTS>
      <ITEM LANG="E" TEXT="Enhancement Composite"/>
     </TEXTS>
    </ITEM>
    <ITEM CMPNAME="TO_ENHANCEMENT_SAP" VERSION="1" STATE="1" EDITORDER="11 " AUTHOR="TBENSIAL" CREATEDON="20110629" CHANGEDBY="TBENSIAL" CHANGEDON="20110629" TYPTYPE="3" TYPE="IF_ENH_OBJECT" R3RELEASE="701">
     <TEXTS>
      <ITEM LANG="E" TEXT="General Methods for Enhancement Objects"/>
     </TEXTS>
    </ITEM>
    <ITEM CMPNAME="TO_ENH_IMPL" VERSION="1" STATE="1" EDITORDER="9 " AUTHOR="TBENSIAL" CREATEDON="20110629" CHANGEDBY="TBENSIAL" CHANGEDON="20110629" TYPTYPE="3" TYPE="ZAPLINK_ENHO_DATA">
     <TEXTS>
      <ITEM LANG="E" TEXT="Data for Enhancement Implementation"/>
     </TEXTS>
    </ITEM>
    <ITEM CMPNAME="TO_ENH_IMPL_SAP" VERSION="1" STATE="1" EDITORDER="10 " AUTHOR="TBENSIAL" CREATEDON="20110629" CHANGEDBY="TBENSIAL" CHANGEDON="20110629" TYPTYPE="3" TYPE="CL_ENH_TOOL_BADI_IMPL">
     <TEXTS>
      <ITEM LANG="E" TEXT="Enhancement Tool Redefinition BAdI"/>
     </TEXTS>
    </ITEM>
    <ITEM CMPNAME="TO_ENH_SPOT" VERSION="1" STATE="1" EDITORDER="7 " AUTHOR="TBENSIAL" CREATEDON="20110624" CHANGEDBY="TBENSIAL" CHANGEDON="20110629" TYPTYPE="3" TYPE="ZAPLINK_ENHS_DATA">
     <TEXTS>
      <ITEM LANG="E" TEXT="Data for Enhancement Spot"/>
     </TEXTS>
    </ITEM>
    <ITEM CMPNAME="TO_ENH_SPOT_SAP" VERSION="1" STATE="1" EDITORDER="8 " AUTHOR="TBENSIAL" CREATEDON="20110624" CHANGEDBY="TBENSIAL" CHANGEDON="20110629" TYPTYPE="3" TYPE="CL_ENH_TOOL_BADI_DEF">
     <TEXTS>
      <ITEM LANG="E" TEXT="Enhancement Tool BAdI"/>
     </TEXTS>
    </ITEM>
    <ITEM CMPNAME="TS_SOTR" VERSION="1" EXPOSURE="1" STATE="1" EDITORDER="2 " AUTHOR="TBENSIAL" CREATEDON="20110831" CHANGEDBY="TBENSIAL" CHANGEDON="20110831" TYPTYPE="4" R3RELEASE="701">BEGIN OF ts_sotr,
      short TYPE td_SOTR_CONCEPT,
      long  TYPE td_SOTR_CONCEPT,
    END OF ts_sotr
`</ITEM>
   </TYPES>
  </RAW>
 </ZL_OBJECT>
 <ZL_OBJECT CHECKSUM="CBE88D5C23CC3864028EA08EB4F342E4" CODE_SIGNATURE="188E3CD3463CA949AB0C7058986A9B0A" CONNECTOR="39AC0A4B07A5A05AE1000000AC120173" NAME="ZAPLINK_ENHANCEMENT_DATA" TYPE="CLAS" VERSION="1.01">
  <DIRECTORY SRCSYSTEM="OD6" AUTHOR="TBENSIAL" DEVCLASS="ZAPLINK-CONNECTORS-MAIN" MASTERLANG="E"/>
  <RAW>
   <A0_MAINDATA VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" AUTHOR="TBENSIAL" CREATEDON="20110701" CHANGEDBY="TBENSIAL" CHANGEDON="20110701" CLSABSTRCT="X" CLSCCINCL="X" FIXPT="X" UNICODE="X" R3RELEASE="701">
    <INHERITANCE REFCLSNAME="ZAPLINK_RAW_DATA" VERSION="1" STATE="1" AUTHOR="TBENSIAL" CREATEDON="20110701"/>
    <TEXTS>
     <ITEM LANG="E" TEXT="Base Class for Enhancement Data">U1&amp;FUNCTIONALITY&amp;
ASIs part of connector : ZAPLINK_BADI
U1&amp;RELATIONS&amp;
AS
U1&amp;EXAMPLE&amp;
AS
U1&amp;HINTS&amp;
AS
U1&amp;FURTHER_SOURCES_OF_INF&amp;
AS
U1Memories
ASThis application is dedicated to the memories of :
B2My father : Lamri BENSIALI (1940-2004) without whom I never started
  programming
B2My uncle : Jacky BEDU (1934-2009) who died during the completion of this
  application</ITEM>
    </TEXTS>
   </A0_MAINDATA>
   <ALIASES>
    <ITEM CMPNAME="TT_LTEXTS" VERSION="1" EXPOSURE="2" CMPTYPE="3" REFCLSNAME="ZAPLINK_DATATYPES" REFCMPNAME="TT_LTEXTS"/>
   </ALIASES>
   <ATTRIBUTS>
    <ITEM CMPNAME="O_MYCX" VERSION="1" EXPOSURE="1" STATE="1" EDITORDER="1 " AUTHOR="TBENSIAL" CREATEDON="20110701" CHANGEDBY="TBENSIAL" CHANGEDON="20110829" ATTDECLTYP="1" TYPTYPE="1" TYPE="TO_EXCEPTION">
     <TEXTS>
      <ITEM LANG="E" TEXT="ZAPlink ROOT Exception for Connectors"/>
     </TEXTS>
    </ITEM>
    <ITEM CMPNAME="TEXTS" VERSION="1" EXPOSURE="2" STATE="1" EDITORDER="1 " AUTHOR="TBENSIAL" CREATEDON="20110701" CHANGEDBY="TBENSIAL" CHANGEDON="20110701" ATTRDONLY="X" TYPTYPE="1" TYPE="TT_LTEXTS">
     <TEXTS>
      <ITEM LANG="E" TEXT="Enhancement description Texts"/>
     </TEXTS>
    </ITEM>
   </ATTRIBUTS>
   <FRIENDS>
    <ITEM REFCLSNAME="ZAPLINK_EASYXML" VERSION="1" STATE="1" AUTHOR="TBENSIAL" CREATEDON="20110701"/>
    <ITEM REFCLSNAME="ZAPLINK_ENHANCEMENT" VERSION="1" STATE="1" AUTHOR="TBENSIAL" CREATEDON="20110701"/>
   </FRIENDS>
   <INTERFACES>
    <ITEM REFCLSNAME="ZAPLINK_CNX_EXT_CLEANER_4DATA" VERSION="1" EXPOSURE="2" STATE="1" AUTHOR="TBENSIAL" CREATEDON="20110701" CHANGEDBY="TBENSIAL" CHANGEDON="20110701" RELTYPE="1">
     <COMPONENTS>
      <ITEM VERSION="1" MTDNAME="ANONYMIZE" MTDABSTRCT="X"/>
      <ITEM VERSION="1" MTDNAME="UNANONYMIZE" MTDABSTRCT="X"/>
     </COMPONENTS>
    </ITEM>
    <ITEM REFCLSNAME="ZAPLINK_DATATYPES" VERSION="1" EXPOSURE="2" STATE="1" AUTHOR="TBENSIAL" CREATEDON="20110701" RELTYPE="1"/>
   </INTERFACES>
   <LOCAL>
    <TYPES>`
*&quot;* USE THIS SOURCE FILE FOR ANY TYPE DECLARATIONS (CLASS
*&quot;* definitions, interfaces or data types) you need for method
*&quot;* IMPLEMENTATION OR PRIVATE METHOD&apos;S SIGNATURE</TYPES>
    <IMPLEMENTATIONS>`
*&quot;* LOCAL CLASS IMPLEMENTATION FOR PUBLIC CLASS
*&quot;* use this source file for the implementation part of
*&quot;* LOCAL HELPER CLASSES</IMPLEMENTATIONS>
    <MACROS>`
*&quot;* USE THIS SOURCE FILE FOR ANY MACRO DEFINITIONS YOU NEED
*&quot;* IN THE IMPLEMENTATION PART OF THE CLASS

INCLUDE zaplink_macros.</MACROS>
   </LOCAL>
   <METHODS>
    <ITEM CMPNAME="SOTR_2_TEXTS" VERSION="1" EXPOSURE="1" STATE="1" EDITORDER="1 " AUTHOR="TBENSIAL" CREATEDON="20110713" CHANGEDBY="TBENSIAL" CHANGEDON="20110829" MTDNEWEXC="X">
     <TEXTS>
      <ITEM LANG="E" TEXT="Read SOTR to text table"/>
     </TEXTS>
     <PARAMETERS>
      <ITEM SCONAME="DATA" VERSION="1" CMPTYPE="1" EDITORDER="1 " AUTHOR="TBENSIAL" CREATEDON="20110713" CHANGEDBY="TBENSIAL" CHANGEDON="20110829" PARPASSTYP="1" TYPTYPE="1" TYPE="TS_SOTR">
       <TEXTS>
        <ITEM LANG="E" TEXT="SOTR IDs (Short &amp; Long)"/>
       </TEXTS>
      </ITEM>
      <ITEM SCONAME="RESULTS" VERSION="1" CMPTYPE="1" EDITORDER="2 " AUTHOR="TBENSIAL" CREATEDON="20110713" CHANGEDBY="TBENSIAL" CHANGEDON="20110829" PARDECLTYP="3" TYPTYPE="1" TYPE="TT_LTEXTS"/>
     </PARAMETERS>
     <EXCEPTIONS>
      <ITEM SCONAME="ZAPLINK_CX_CONNECTOR" VERSION="1" LANGU="E" EDITORDER="1 " AUTHOR="TBENSIAL" CREATEDON="20110829">
       <TEXTS>
        <ITEM LANG="E" TEXT="ZAPlink ROOT Exception for Connectors"/>
       </TEXTS>
      </ITEM>
     </EXCEPTIONS>
     <SOURCE>`
  TYPES:
    BEGIN OF ts_lang,
      lang       TYPE sotr_text-langu,
    END OF ts_lang.
  DATA tt_lang    TYPE STANDARD TABLE OF ts_lang WITH DEFAULT KEY.
  DATA key        TYPE sotr_key.
  DATA s_text     LIKE LINE OF results.
  DATA sotr_text  TYPE sotr_text.
  DATA btfr_str   TYPE btfr_string.
  FIELD-SYMBOLS &lt;l&gt; LIKE LINE OF tt_lang.

  SELECT langu INTO TABLE tt_lang
    FROM sotr_text
    WHERE concept = data-short
      AND object = space.

  SELECT langu APPENDING TABLE tt_lang
    FROM sotr_textu
    WHERE concept = data-long
      AND object = space.

  SORT tt_lang.     DELETE ADJACENT DUPLICATES FROM tt_lang.

  LOOP AT tt_lang ASSIGNING &lt;l&gt;.
    CLEAR s_text.
* Short
    IF data-short IS NOT INITIAL.
      CLEAR: key, sotr_text.
      key-concept = data-short.
      CALL FUNCTION &apos;SOTR_READ_TEXT_WITH_KEY&apos;
        EXPORTING
          langu                  = &lt;l&gt;-lang
*          CONTEXT                =
          sotr_key               = key
*          FLAG_CONTEXT           =
        IMPORTING
*       HEADER                 =
          entry                  = sotr_text
        EXCEPTIONS
          no_entry_found         = 1
          language_missing       = 0        &quot; Could exist only for long for this language
          OTHERS                 = 3.
      IF sy-subrc &lt;&gt; 0.
        mac_raise_mf &apos;SOTR_READ_TEXT_WITH_KEY&apos; sy-subrc.
      ELSE.
        s_text-text = sotr_text-text.
      ENDIF.
    ENDIF.

* Long
    IF data-long IS NOT INITIAL.
      CLEAR: btfr_str.
      CALL FUNCTION &apos;BTFR_SELECT_SINGLE&apos;
        EXPORTING
          concept                   = data-long
          langu                     = &lt;l&gt;-lang
          flag_string               = abap_true
          flag_system_context       = abap_false
*         CONTEXT                   =
        IMPORTING
*         TEXT_WA                   =
          string_wa                 = btfr_str
*         HEADER                    =
        EXCEPTIONS
          concept_not_found         = 1
          text_not_found            = 0     &quot; Could exist only for long for this language
          OTHERS                    = 3.
      IF sy-subrc &lt;&gt; 0.
        mac_raise_mf &apos;BTFR_SELECT_SINGLE&apos; sy-subrc.
      ELSE.
        s_text-_ = btfr_str-text.
      ENDIF.
    ENDIF.

    IF s_text IS NOT INITIAL.
      s_text-lang = &lt;l&gt;.
      INSERT s_text INTO TABLE results.
    ENDIF.

  ENDLOOP.</SOURCE>
    </ITEM>
    <ITEM CMPNAME="TEXTS_2_SOTR" VERSION="1" EXPOSURE="1" STATE="1" EDITORDER="2 " AUTHOR="TBENSIAL" CREATEDON="20110829" CHANGEDBY="TBENSIAL" CHANGEDON="20110829" MTDNEWEXC="X">
     <TEXTS>
      <ITEM LANG="E" TEXT="Write SOTR from text table"/>
     </TEXTS>
     <PARAMETERS>
      <ITEM SCONAME="SOTR" VERSION="1" CMPTYPE="1" EDITORDER="1 " AUTHOR="TBENSIAL" CREATEDON="20110829" CHANGEDBY="TBENSIAL" CHANGEDON="20110829" PARPASSTYP="1" TYPTYPE="1" TYPE="TS_SOTR">
       <TEXTS>
        <ITEM LANG="E" TEXT="SOTR IDs (Short &amp; Long)"/>
       </TEXTS>
      </ITEM>
      <ITEM SCONAME="TEXTS" VERSION="1" CMPTYPE="1" EDITORDER="2 " AUTHOR="TBENSIAL" CREATEDON="20110829" CHANGEDBY="TBENSIAL" CHANGEDON="20110829" PARPASSTYP="1" TYPTYPE="1" TYPE="TT_LTEXTS"/>
     </PARAMETERS>
     <EXCEPTIONS>
      <ITEM SCONAME="ZAPLINK_CX_CONNECTOR" VERSION="1" LANGU="E" EDITORDER="1 " AUTHOR="TBENSIAL" CREATEDON="20110829">
       <TEXTS>
        <ITEM LANG="E" TEXT="ZAPlink ROOT Exception for Connectors"/>
       </TEXTS>
      </ITEM>
     </EXCEPTIONS>
     <SOURCE>`
  DATA _txt     TYPE string.
  FIELD-SYMBOLS: &lt;t&gt; LIKE LINE OF texts.

  LOOP AT texts ASSIGNING &lt;t&gt;.
    IF &lt;t&gt;-text IS NOT INITIAL.
      _txt = &lt;t&gt;-text.
      CALL FUNCTION &apos;BTFR_MAINTAIN_SINGLE_TEXT&apos;
        EXPORTING
*         PACKAGE                            =
*         OBJECT_TYPE                        =
          langu                              = &lt;t&gt;-lang
          concept                            = sotr-short
*         ALIAS                              =
*         TRANSL_TYPE                        =
*         FLAG_STRING                        =
*         OPTIONS_EDITOR                     =
*         OPTIONS_CHECK                      =
*         FLAG_NO_CONTEXT                    =
*         FLAG_DISPLAY                       =
          flag_no_screen                     = abap_true
*         FLAG_CALLED_FROM_EDIT_SCREEN       =
          default_text                       = _txt
          flag_correction_entry              = abap_false
*         CORR_NUM                           =
*         USE_KORRNUM_IMMEDIATEDLY           =
*       IMPORTING
*         FLAG_CANCELLED                     =
*         HEADER                             =
*         TEXT                               =
*         STRING                             =
        EXCEPTIONS
          parameter_error                    = 1
          text_not_found                     = 2
          invalid_object_type                = 3
          invalid_package                    = 4
          header_diff_interface              = 5
          invalid_tadir_entry                = 6
          invalid_transl_type                = 7
          invalid_concept                    = 8
          OTHERS                             = 9.
      IF sy-subrc &lt;&gt; 0.
        mac_raise_mf &apos;BTFR_MAINTAIN_SINGLE_TEXT&apos; sy-subrc.
      ENDIF.
    ENDIF.
    IF &lt;t&gt;-_ IS NOT INITIAL.
      _txt = &lt;t&gt;-_.
      CALL FUNCTION &apos;BTFR_MAINTAIN_SINGLE_TEXT&apos;
        EXPORTING
*         PACKAGE                            =
*         OBJECT_TYPE                        =
          langu                              = &lt;t&gt;-lang
          concept                            = sotr-long
*         ALIAS                              =
*         TRANSL_TYPE                        =
*         FLAG_STRING                        =
*         OPTIONS_EDITOR                     =
*         OPTIONS_CHECK                      =
*         FLAG_NO_CONTEXT                    =
*         FLAG_DISPLAY                       =
          flag_no_screen                     = abap_true
*         FLAG_CALLED_FROM_EDIT_SCREEN       =
          default_text                       = _txt
          flag_correction_entry              = abap_false
*         CORR_NUM                           =
*         USE_KORRNUM_IMMEDIATEDLY           =
*       IMPORTING
*         FLAG_CANCELLED                     =
*         HEADER                             =
*         TEXT                               =
*         STRING                             =
        EXCEPTIONS
          parameter_error                    = 1
          text_not_found                     = 2
          invalid_object_type                = 3
          invalid_package                    = 4
          header_diff_interface              = 5
          invalid_tadir_entry                = 6
          invalid_transl_type                = 7
          invalid_concept                    = 8
          OTHERS                             = 9.
      IF sy-subrc &lt;&gt; 0.
        mac_raise_mf &apos;BTFR_MAINTAIN_SINGLE_TEXT&apos; sy-subrc.
      ENDIF.
    ENDIF.
  ENDLOOP.</SOURCE>
    </ITEM>
   </METHODS>
   <TYPEGROUPS>
    <ITEM TYPEGROUP="SEEX" VERSION="1" EXPLICIT="X"/>
   </TYPEGROUPS>
   <TYPES>
    <ITEM CMPNAME="TD_SOTR_CONCEPT" VERSION="1" EXPOSURE="1" STATE="1" EDITORDER="6 " AUTHOR="TBENSIAL" CREATEDON="20110829" TYPTYPE="1" TYPE="SOTR_TEXT-CONCEPT" R3RELEASE="701"/>
    <ITEM CMPNAME="TO_COMPONENT" VERSION="1" EXPOSURE="1" STATE="1" EDITORDER="3 " AUTHOR="TBENSIAL" CREATEDON="20110701" CHANGEDBY="TBENSIAL" CHANGEDON="20110829" TYPTYPE="3" TYPE="ZAPLINK_COMPONENT">
     <TEXTS>
      <ITEM LANG="E" TEXT="Zap Link Component"/>
     </TEXTS>
    </ITEM>
    <ITEM CMPNAME="TO_EXCEPTION" VERSION="1" EXPOSURE="1" STATE="1" EDITORDER="1 " AUTHOR="TBENSIAL" CREATEDON="20110701" CHANGEDBY="TBENSIAL" CHANGEDON="20110829" TYPTYPE="3" TYPE="ZAPLINK_CX_CONNECTOR">
     <TEXTS>
      <ITEM LANG="E" TEXT="ZAPlink ROOT Exception for Connectors"/>
     </TEXTS>
    </ITEM>
    <ITEM CMPNAME="TO_LIST" VERSION="1" EXPOSURE="1" STATE="1" EDITORDER="2 " AUTHOR="TBENSIAL" CREATEDON="20110701" CHANGEDBY="TBENSIAL" CHANGEDON="20110829" TYPTYPE="3" TYPE="ZAPLINK_LIST">
     <TEXTS>
      <ITEM LANG="E" TEXT="ZapLink Components list"/>
     </TEXTS>
    </ITEM>
    <ITEM CMPNAME="TO_MSG_COLL" VERSION="1" EXPOSURE="1" STATE="1" EDITORDER="4 " AUTHOR="TBENSIAL" CREATEDON="20110701" CHANGEDBY="TBENSIAL" CHANGEDON="20110829" TYPTYPE="3" TYPE="ZAPLINK_MESSAGE_COLLECTOR">
     <TEXTS>
      <ITEM LANG="E" TEXT="Message Collector: Standard Implementation"/>
     </TEXTS>
    </ITEM>
    <ITEM CMPNAME="TO_RAW" VERSION="1" EXPOSURE="1" STATE="1" EDITORDER="5 " AUTHOR="TBENSIAL" CREATEDON="20110701" CHANGEDBY="TBENSIAL" CHANGEDON="20110829" TYPTYPE="3" TYPE="ZAPLINK_RAW">
     <TEXTS>
      <ITEM LANG="E" TEXT="RAW component with data"/>
     </TEXTS>
    </ITEM>
    <ITEM CMPNAME="TS_SOTR" VERSION="1" EXPOSURE="1" STATE="1" EDITORDER="7 " AUTHOR="TBENSIAL" CREATEDON="20110713" CHANGEDBY="TBENSIAL" CHANGEDON="20110829" TYPTYPE="4">
     BEGIN OF ts_sotr,
      short TYPE td_SOTR_CONCEPT,
      long  TYPE td_SOTR_CONCEPT,
    END OF ts_sotr
`
     <TEXTS>
      <ITEM LANG="E" TEXT="SOTR IDs (Short &amp; Long)"/>
     </TEXTS>
    </ITEM>
   </TYPES>
  </RAW>
 </ZL_OBJECT>
 <ZL_OBJECT CHECKSUM="01F4DF4FB8F922C51F445C4D2E1B32D9" CODE_SIGNATURE="8D66D8BA4456F19AEC0DCA5E8F85FCB7" CONNECTOR="39AC0A4B07A5A05AE1000000AC120173" NAME="ZAPLINK_ENHC_DATA" TYPE="CLAS" VERSION="1.01">
  <DEPENDENCIES>
   <ITEM TYPE="CLAS" NAME="ZAPLINK_ENHANCEMENT_DATA"/>
  </DEPENDENCIES>
  <DIRECTORY SRCSYSTEM="OD6" AUTHOR="TBENSIAL" DEVCLASS="ZAPLINK-CONNECTORS-MAIN" MASTERLANG="E"/>
  <RAW>
   <A0_MAINDATA VERSION="1" LANGU="E" EXPOSURE="1" STATE="1" AUTHOR="TBENSIAL" CREATEDON="20110629" CHANGEDBY="TBENSIAL" CHANGEDON="20110629" CLSCCINCL="X" FIXPT="X" UNICODE="X" R3RELEASE="701">
    <INHERITANCE REFCLSNAME="ZAPLINK_ENHANCEMENT_DATA" VERSION="1" STATE="1" AUTHOR="TBENSIAL" CREATEDON="20110701" CHANGEDBY="TBENSIAL" CHANGEDON="20110701"/>
    <TEXTS>
     <ITEM LANG="E" TEXT="Data for Composit Enhancement Implementation">U1&amp;FUNCTIONALITY&amp;
ASIs part of connector : ZAPLINK_BADI
U1&amp;RELATIONS&amp;
AS
U1&amp;EXAMPLE&amp;
AS
U1&amp;HINTS&amp;
AS
U1&amp;FURTHER_SOURCES_OF_INF&amp;
AS
U1Memories
ASThis application is dedicated to the memories of :
B2My father : Lamri BENSIALI (1940-2004) without whom I never started
  programming
B2My uncle : Jacky BEDU (1934-2009) who died during the completion of this
  application</ITEM>
    </TEXTS>
   </A0_MAINDATA>
   <ATTRIBUTS>
    <ITEM CMPNAME="A0_MAINDATA" VERSION="1" EXPOSURE="2" STATE="1" EDITORDER="1 " AUTHOR="TBENSIAL" CREATEDON="20110629" CHANGEDBY="TBENSIAL" CHANGEDON="20110902" TYPTYPE="1" TYPE="TS_HEADER">
     <TEXTS>
      <ITEM LANG="E" TEXT="Enhancement Composite Header Data"/>
     </TEXTS>
    </ITEM>
    <ITEM CMPNAME="COMPOSIT_ENH_IMPLEMENTATIONS" VERSION="1" EXPOSURE="2" STATE="1" EDITORDER="3 " AUTHOR="TBENSIAL" CREATEDON="20110630" CHANGEDBY="TBENSIAL" CHANGEDON="20110902" TYPTYPE="1" TYPE="TT_COMP_ENH"/>
    <ITEM CMPNAME="ENHANCEMENT_IMPLEMENTATIONS" VERSION="1" EXPOSURE="2" STATE="1" EDITORDER="2 " AUTHOR="TBENSIAL" CREATEDON="20110630" CHANGEDBY="TBENSIAL" CHANGEDON="20110902" TYPTYPE="1" TYPE="TT_ENH"/>
   </ATTRIBUTS>
   <FRIENDS>
    <ITEM REFCLSNAME="ZAPLINK_EASYXML" VERSION="1" STATE="1" AUTHOR="TBENSIAL" CREATEDON="20110629"/>
    <ITEM REFCLSNAME="ZAPLINK_ENHANCEMENT" VERSION="1" STATE="1" AUTHOR="TBENSIAL" CREATEDON="20110629"/>
   </FRIENDS>
   <LOCAL>
    <TYPES>`
*&quot;* USE THIS SOURCE FILE FOR ANY TYPE DECLARATIONS (CLASS
*&quot;* definitions, interfaces or data types) you need for method
*&quot;* IMPLEMENTATION OR PRIVATE METHOD&apos;S SIGNATURE</TYPES>
    <IMPLEMENTATIONS>`
*&quot;* LOCAL CLASS IMPLEMENTATION FOR PUBLIC CLASS
*&quot;* use this source file for the implementation part of
*&quot;* LOCAL HELPER CLASSES</IMPLEMENTATIONS>
    <MACROS>`
*&quot;* USE THIS SOURCE FILE FOR ANY MACRO DEFINITIONS YOU NEED
*&quot;* IN THE IMPLEMENTATION PART OF THE CLASS</MACROS>
   </LOCAL>
   <METHODS>
    <ITEM CMPNAME="FROM_DATA" VERSION="1" EXPOSURE="2" STATE="1" EDITORDER="1 " AUTHOR="TBENSIAL" CREATEDON="20110629" CHANGEDBY="TBENSIAL" CHANGEDON="20110902">
     <TEXTS>
      <ITEM LANG="E" TEXT="Convert FM Data to object attributes"/>
     </TEXTS>
     <PARAMETERS>
      <ITEM SCONAME="DATA" VERSION="1" CMPTYPE="1" EDITORDER="1 " AUTHOR="TBENSIAL" CREATEDON="20110629" CHANGEDBY="TBENSIAL" CHANGEDON="20110902" PARPASSTYP="1" TYPTYPE="1" TYPE="TS_FM_DATA">
       <TEXTS>
        <ITEM LANG="E" TEXT="Composite Enhancement Spot definition"/>
       </TEXTS>
      </ITEM>
     </PARAMETERS>
     <SOURCE>`
  DATA s_enh    LIKE LINE OF enhancement_implementations.
  DATA s_comp   LIKE LINE OF composit_enh_implementations.
  DATA s_txt    TYPE ts_sotr.
  FIELD-SYMBOLS:
    &lt;enh&gt;   LIKE LINE OF data-enh,
    &lt;comp&gt;  LIKE LINE OF data-comp_enh.

  a0_maindata-main = data-header.
  s_txt-short = a0_maindata-shorttextid.
  s_txt-long = a0_maindata-docuid.
  Clear: a0_maindata-shorttextid, a0_maindata-docuid.
  a0_maindata-texts = sotr_2_texts( s_txt ).
  LOOP AT data-enh ASSIGNING &lt;enh&gt;.
    CLEAR s_enh.
    s_enh-name = &lt;enh&gt;.
    APPEND s_enh TO enhancement_implementations.
  ENDLOOP.
  LOOP AT data-comp_enh ASSIGNING &lt;comp&gt;.
    CLEAR s_comp.
    s_comp-name = &lt;comp&gt;.
    APPEND s_comp TO composit_enh_implementations.
  ENDLOOP.</SOURCE>
    </ITEM>
    <ITEM CMPNAME="TO_DATA" VERSION="1" EXPOSURE="2" STATE="1" EDITORDER="2 " AUTHOR="TBENSIAL" CREATEDON="20110629" CHANGEDBY="TBENSIAL" CHANGEDON="20110902">
     <TEXTS>
      <ITEM LANG="E" TEXT="Convert object attributes to FM Data"/>
     </TEXTS>
     <PARAMETERS>
      <ITEM SCONAME="DATA" VERSION="1" CMPTYPE="1" EDITORDER="1 " AUTHOR="TBENSIAL" CREATEDON="20110630" CHANGEDBY="TBENSIAL" CHANGEDON="20110902" PARDECLTYP="3" TYPTYPE="1" TYPE="TS_FM_DATA">
       <TEXTS>
        <ITEM LANG="E" TEXT="Composite Enhancement Spot definition"/>
       </TEXTS>
      </ITEM>
     </PARAMETERS>
     <SOURCE>`
  DATA s_enh    LIKE LINE OF data-enh.
  DATA s_comp   LIKE LINE OF data-comp_enh.
  FIELD-SYMBOLS:
    &lt;enh&gt;   LIKE LINE OF enhancement_implementations,
    &lt;comp&gt;  LIKE LINE OF composit_enh_implementations.

  data-header = a0_maindata-main.
  LOOP AT enhancement_implementations ASSIGNING &lt;enh&gt;.
    CLEAR s_enh.
    s_enh = &lt;enh&gt;-name.
    APPEND s_enh TO data-enh.
  ENDLOOP.
  LOOP AT composit_enh_implementations ASSIGNING &lt;comp&gt;.
    CLEAR s_comp.
    s_comp = &lt;comp&gt;-name.
    APPEND s_comp TO data-comp_enh.
  ENDLOOP.</SOURCE>
    </ITEM>
   </METHODS>
   <REDEFINITIONS>
    <ITEM REFCLSNAME="ZAPLINK_ENHANCEMENT_DATA" VERSION="1" MTDNAME="ZAPLINK_CNX_EXT_CLEANER_4DATA~ANONYMIZE"/>
    <ITEM REFCLSNAME="ZAPLINK_ENHANCEMENT_DATA" VERSION="1" MTDNAME="ZAPLINK_CNX_EXT_CLEANER_4DATA~UNANONYMIZE"/>
   </REDEFINITIONS>
   <TYPES>
    <ITEM CMPNAME="TO_COMP_ENH" VERSION="1" EXPOSURE="2" STATE="1" EDITORDER="6 " AUTHOR="TBENSIAL" CREATEDON="20110629" CHANGEDBY="TBENSIAL" CHANGEDON="20110902" TYPTYPE="3" TYPE="CL_ENH_SPOT_COMPOSITE">
     <TEXTS>
      <ITEM LANG="E" TEXT="Enhancement Spot Composite"/>
     </TEXTS>
    </ITEM>
    <ITEM CMPNAME="TS_COMP_ENH" VERSION="1" EXPOSURE="2" STATE="1" EDITORDER="2 " AUTHOR="TBENSIAL" CREATEDON="20110630" CHANGEDBY="TBENSIAL" CHANGEDON="20110902" TYPTYPE="4">BEGIN OF ts_comp_enh,
          name      TYPE enhcompositename,
          zl_object TYPE to_raw,
        END OF ts_comp_enh
`</ITEM>
    <ITEM CMPNAME="TS_ENH" VERSION="1" EXPOSURE="2" STATE="1" EDITORDER="4 " AUTHOR="TBENSIAL" CREATEDON="20110630" CHANGEDBY="TBENSIAL" CHANGEDON="20110902" TYPTYPE="4">BEGIN OF ts_enh,
          name      TYPE enhcompositename,
          zl_object TYPE to_raw,
        END OF ts_enh
`</ITEM>
    <ITEM CMPNAME="TS_FM_DATA" VERSION="1" EXPOSURE="2" STATE="1" EDITORDER="7 " AUTHOR="TBENSIAL" CREATEDON="20110629" CHANGEDBY="TBENSIAL" CHANGEDON="20110902" TYPTYPE="4">
     BEGIN OF ts_fm_data,
          header          TYPE enhcompheader,
          comp_enh        TYPE enhcompositename_it,
          enh             TYPE enhname_it,
*      documentation   TYPE tt_docs,
        END OF ts_fm_data
`
     <TEXTS>
      <ITEM LANG="E" TEXT="Composite Enhancement Implementation definition"/>
     </TEXTS>
    </ITEM>
    <ITEM CMPNAME="TS_HEADER" VERSION="1" EXPOSURE="2" STATE="1" EDITORDER="1 " AUTHOR="TBENSIAL" CREATEDON="20110629" CHANGEDBY="TBENSIAL" CHANGEDON="20110902" TYPTYPE="4">
     BEGIN OF ts_header.
    INCLUDE TYPE enhcompheader AS main.
    TYPES:
        texts TYPE tt_ltexts,
      END OF ts_header
`
     <TEXTS>
      <ITEM LANG="E" TEXT="Enhancement Composite Header Data"/>
     </TEXTS>
    </ITEM>
    <ITEM CMPNAME="TT_COMP_ENH" VERSION="1" EXPOSURE="2" STATE="1" EDITORDER="3 " AUTHOR="TBENSIAL" CREATEDON="20110630" CHANGEDBY="TBENSIAL" CHANGEDON="20110902" TYPTYPE="4">tt_comp_enh TYPE STANDARD TABLE OF ts_comp_enh WITH DEFAULT KEY
`</ITEM>
    <ITEM CMPNAME="TT_ENH" VERSION="1" EXPOSURE="2" STATE="1" EDITORDER="5 " AUTHOR="TBENSIAL" CREATEDON="20110630" CHANGEDBY="TBENSIAL" CHANGEDON="20110902" TYPTYPE="4">tt_enh TYPE STANDARD TABLE OF ts_enh WITH DEFAULT KEY
`</ITEM>
   </TYPES>
  </RAW>
 </ZL_OBJECT>
 <ZL_OBJECT CHECKSUM="15DEFBB83FA9ACBCBBDF5DF21EFB5578" CODE_SIGNATURE="7A6D4988384971947285D2DB297E1025" CONNECTOR="39AC0A4B07A5A05AE1000000AC120173" NAME="ZAPLINK_ENHO_DATA" TYPE="CLAS" VERSION="1.01">
  <DEPENDENCIES>
   <ITEM TYPE="CLAS" NAME="ZAPLINK_ENHANCEMENT_DATA"/>
  </DEPENDENCIES>
  <DIRECTORY SRCSYSTEM="OD6" AUTHOR="TBENSIAL" DEVCLASS="ZAPLINK-CONNECTORS-MAIN" MASTERLANG="E"/>
  <RAW>
   <A0_MAINDATA VERSION="1" LANGU="E" EXPOSURE="1" STATE="1" AUTHOR="TBENSIAL" CREATEDON="20110629" CHANGEDBY="TBENSIAL" CHANGEDON="20110629" CLSCCINCL="X" FIXPT="X" UNICODE="X" R3RELEASE="701">
    <INHERITANCE REFCLSNAME="ZAPLINK_ENHANCEMENT_DATA" VERSION="1" STATE="1" AUTHOR="TBENSIAL" CREATEDON="20110701" CHANGEDBY="TBENSIAL" CHANGEDON="20110701"/>
    <TEXTS>
     <ITEM LANG="E" TEXT="Data for Enhancement Implementation">U1&amp;FUNCTIONALITY&amp;
ASIs part of connector : ZAPLINK_BADI
U1&amp;RELATIONS&amp;
AS
U1&amp;EXAMPLE&amp;
AS
U1&amp;HINTS&amp;
AS
U1&amp;FURTHER_SOURCES_OF_INF&amp;
AS
U1Memories
ASThis application is dedicated to the memories of :
B2My father : Lamri BENSIALI (1940-2004) without whom I never started
  programming
B2My uncle : Jacky BEDU (1934-2009) who died during the completion of this
  application</ITEM>
    </TEXTS>
   </A0_MAINDATA>
   <ATTRIBUTS>
    <ITEM CMPNAME="A0_MAINDATA" VERSION="1" EXPOSURE="2" STATE="1" EDITORDER="1 " AUTHOR="TBENSIAL" CREATEDON="20110629" CHANGEDBY="TBENSIAL" CHANGEDON="20110902" ATTRDONLY="X" TYPTYPE="1" TYPE="TS_HEADER">
     <TEXTS>
      <ITEM LANG="E" TEXT="Enhancement Composite Header Data"/>
     </TEXTS>
    </ITEM>
    <ITEM CMPNAME="BADI_IMPLEMENTATIONS" VERSION="1" EXPOSURE="2" STATE="1" EDITORDER="2 " AUTHOR="TBENSIAL" CREATEDON="20110701" CHANGEDBY="TBENSIAL" CHANGEDON="20110902" ATTRDONLY="X" TYPTYPE="1" TYPE="TT_BADI_IMPLS"/>
   </ATTRIBUTS>
   <FRIENDS>
    <ITEM REFCLSNAME="ZAPLINK_EASYXML" VERSION="1" STATE="1" AUTHOR="TBENSIAL" CREATEDON="20110629"/>
    <ITEM REFCLSNAME="ZAPLINK_ENHANCEMENT" VERSION="1" STATE="1" AUTHOR="TBENSIAL" CREATEDON="20110629"/>
   </FRIENDS>
   <LOCAL>
    <TYPES>`
*&quot;* USE THIS SOURCE FILE FOR ANY TYPE DECLARATIONS (CLASS
*&quot;* definitions, interfaces or data types) you need for method
*&quot;* IMPLEMENTATION OR PRIVATE METHOD&apos;S SIGNATURE</TYPES>
    <IMPLEMENTATIONS>`
*&quot;* LOCAL CLASS IMPLEMENTATION FOR PUBLIC CLASS
*&quot;* use this source file for the implementation part of
*&quot;* LOCAL HELPER CLASSES</IMPLEMENTATIONS>
    <MACROS>`
*&quot;* USE THIS SOURCE FILE FOR ANY MACRO DEFINITIONS YOU NEED
*&quot;* IN THE IMPLEMENTATION PART OF THE CLASS</MACROS>
   </LOCAL>
   <METHODS>
    <ITEM CMPNAME="FROM_DATA" VERSION="1" EXPOSURE="2" STATE="1" EDITORDER="1 " AUTHOR="TBENSIAL" CREATEDON="20110629" CHANGEDBY="TBENSIAL" CHANGEDON="20110902">
     <TEXTS>
      <ITEM LANG="E" TEXT="Convert FM Data to object attributes"/>
     </TEXTS>
     <PARAMETERS>
      <ITEM SCONAME="DATA" VERSION="1" CMPTYPE="1" EDITORDER="1 " AUTHOR="TBENSIAL" CREATEDON="20110629" CHANGEDBY="TBENSIAL" CHANGEDON="20110902" PARPASSTYP="1" TYPTYPE="1" TYPE="TS_FM_DATA">
       <TEXTS>
        <ITEM LANG="E" TEXT="Composite Enhancement Spot definition"/>
       </TEXTS>
      </ITEM>
     </PARAMETERS>
     <SOURCE>`
  DATA s_impl   LIKE LINE OF badi_implementations.
  DATA s_txt    TYPE ts_sotr.
  FIELD-SYMBOLS:
    &lt;impl&gt; LIKE LINE OF data-impl_data.

  a0_maindata-main = data-header.
  a0_maindata-texts = sotr_2_texts( a0_maindata-text_ids ).
  CLEAR a0_maindata-text_ids.
  LOOP AT data-impl_data ASSIGNING &lt;impl&gt;.
    CLEAR s_impl.
    s_impl-main = &lt;impl&gt;.
    s_txt-short = s_impl-impl_shorttext_id.
    s_txt-long = s_impl-impl_longtext_id.
    s_impl-texts = sotr_2_texts( s_txt ).
    CLEAR: s_impl-spot_name, s_impl-impl_shorttext_id, s_impl-impl_shorttext, s_impl-impl_longtext_id.
    INSERT s_impl INTO TABLE badi_implementations.
  ENDLOOP.</SOURCE>
    </ITEM>
    <ITEM CMPNAME="TO_DATA" VERSION="1" EXPOSURE="2" STATE="1" EDITORDER="2 " AUTHOR="TBENSIAL" CREATEDON="20110629" CHANGEDBY="TBENSIAL" CHANGEDON="20110902">
     <TEXTS>
      <ITEM LANG="E" TEXT="Convert object attributes to FM Data"/>
     </TEXTS>
     <PARAMETERS>
      <ITEM SCONAME="FM_DATA" VERSION="1" CMPTYPE="1" EDITORDER="1 " AUTHOR="TBENSIAL" CREATEDON="20110629" CHANGEDBY="TBENSIAL" CHANGEDON="20110902" PARDECLTYP="3" TYPTYPE="1" TYPE="TS_FM_DATA">
       <TEXTS>
        <ITEM LANG="E" TEXT="Composite Enhancement Spot definition"/>
       </TEXTS>
      </ITEM>
     </PARAMETERS>
     <SOURCE>`
  fm_data-header = a0_maindata-main.</SOURCE>
    </ITEM>
   </METHODS>
   <REDEFINITIONS>
    <ITEM REFCLSNAME="ZAPLINK_ENHANCEMENT_DATA" VERSION="1" MTDNAME="ZAPLINK_CNX_EXT_CLEANER_4DATA~ANONYMIZE">
     <SOURCE>`
  CLEAR a0_maindata-createdon.</SOURCE>
    </ITEM>
    <ITEM REFCLSNAME="ZAPLINK_ENHANCEMENT_DATA" VERSION="1" MTDNAME="ZAPLINK_CNX_EXT_CLEANER_4DATA~UNANONYMIZE"/>
   </REDEFINITIONS>
   <TYPES>
    <ITEM CMPNAME="TO_COMP_ENH" VERSION="1" EXPOSURE="2" STATE="1" EDITORDER="4 " AUTHOR="TBENSIAL" CREATEDON="20110629" CHANGEDBY="TBENSIAL" CHANGEDON="20110902" TYPTYPE="3" TYPE="CL_ENH_SPOT_COMPOSITE">
     <TEXTS>
      <ITEM LANG="E" TEXT="Enhancement Spot Composite"/>
     </TEXTS>
    </ITEM>
    <ITEM CMPNAME="TS_BADI_IMPL" VERSION="1" EXPOSURE="2" STATE="1" EDITORDER="5 " AUTHOR="TBENSIAL" CREATEDON="20110701" CHANGEDBY="TBENSIAL" CHANGEDON="20110902" TYPTYPE="4">BEGIN OF ts_badi_impl.
    INCLUDE TYPE enh_badi_impl_data AS main.
    TYPES:
        texts TYPE tt_ltexts,
      END OF ts_badi_impl
`</ITEM>
    <ITEM CMPNAME="TS_COMP_ENH_SPOT" VERSION="1" EXPOSURE="2" STATE="1" EDITORDER="3 " AUTHOR="TBENSIAL" CREATEDON="20110629" CHANGEDBY="TBENSIAL" CHANGEDON="20110902" TYPTYPE="4">BEGIN OF ts_comp_enh_spot,
        name TYPE enhspotcompositename,
        zl_object TYPE to_raw,
      END OF ts_comp_enh_spot
`</ITEM>
    <ITEM CMPNAME="TS_FM_DATA" VERSION="1" EXPOSURE="2" STATE="1" EDITORDER="7 " AUTHOR="TBENSIAL" CREATEDON="20110629" CHANGEDBY="TBENSIAL" CHANGEDON="20110902" TYPTYPE="4">
     BEGIN OF ts_fm_data,
        header      TYPE ts_fm_hdr,
        impl_data   TYPE enh_badi_impl_data_it,
      END OF ts_fm_data
`
     <TEXTS>
      <ITEM LANG="E" TEXT="Composite Enhancement Spot definition"/>
     </TEXTS>
    </ITEM>
    <ITEM CMPNAME="TS_FM_HDR" VERSION="1" EXPOSURE="2" STATE="1" EDITORDER="1 " AUTHOR="TBENSIAL" CREATEDON="20110902" CHANGEDBY="TBENSIAL" CHANGEDON="20110902" TYPTYPE="4">BEGIN OF ts_fm_hdr.
    INCLUDE TYPE enh_dy_spot.
    TYPES:
        spot_name TYPE enhspotname,
        text_ids TYPE ts_sotr,
      END OF ts_fm_hdr
`</ITEM>
    <ITEM CMPNAME="TS_HEADER" VERSION="1" EXPOSURE="2" STATE="1" EDITORDER="2 " AUTHOR="TBENSIAL" CREATEDON="20110629" CHANGEDBY="TBENSIAL" CHANGEDON="20110902" TYPTYPE="4">
     BEGIN OF ts_header.
    INCLUDE TYPE ts_fm_hdr AS main.
    TYPES:
        texts TYPE tt_ltexts,
      END OF ts_header
`
     <TEXTS>
      <ITEM LANG="E" TEXT="BAdI Main Data in Enhancement"/>
     </TEXTS>
    </ITEM>
    <ITEM CMPNAME="TT_BADI_IMPLS" VERSION="1" EXPOSURE="2" STATE="1" EDITORDER="6 " AUTHOR="TBENSIAL" CREATEDON="20110701" CHANGEDBY="TBENSIAL" CHANGEDON="20110902" TYPTYPE="4">tt_badi_impls TYPE SORTED TABLE OF ts_badi_impl WITH UNIQUE KEY badi_name impl_name
`</ITEM>
   </TYPES>
  </RAW>
 </ZL_OBJECT>
 <ZL_OBJECT CHECKSUM="5104C6AB52993B3C3D2993CE6D8E1C94" CODE_SIGNATURE="F319B0485E3C953D905393C236226207" CONNECTOR="39AC0A4B07A5A05AE1000000AC120173" NAME="ZAPLINK_ENHS_DATA" TYPE="CLAS" VERSION="1.01">
  <DEPENDENCIES>
   <ITEM TYPE="CLAS" NAME="ZAPLINK_ENHANCEMENT_DATA"/>
  </DEPENDENCIES>
  <DIRECTORY SRCSYSTEM="OD6" AUTHOR="TBENSIAL" DEVCLASS="ZAPLINK-CONNECTORS-MAIN" MASTERLANG="E"/>
  <RAW>
   <A0_MAINDATA VERSION="1" LANGU="E" EXPOSURE="1" STATE="1" AUTHOR="TBENSIAL" CREATEDON="20110624" CHANGEDBY="TBENSIAL" CHANGEDON="20110624" CLSCCINCL="X" FIXPT="X" UNICODE="X" R3RELEASE="701">
    <INHERITANCE REFCLSNAME="ZAPLINK_ENHANCEMENT_DATA" VERSION="1" STATE="1" AUTHOR="TBENSIAL" CREATEDON="20110701" CHANGEDBY="TBENSIAL" CHANGEDON="20110701"/>
    <TEXTS>
     <ITEM LANG="E" TEXT="Data for Enhancement Spot">U1&amp;FUNCTIONALITY&amp;
ASIs part of connector : ZAPLINK_BADI
U1&amp;RELATIONS&amp;
AS
U1&amp;EXAMPLE&amp;
AS
U1&amp;HINTS&amp;
AS
U1&amp;FURTHER_SOURCES_OF_INF&amp;
AS
U1Memories
ASThis application is dedicated to the memories of :
B2My father : Lamri BENSIALI (1940-2004) without whom I never started
  programming
B2My uncle : Jacky BEDU (1934-2009) who died during the completion of this
  application</ITEM>
    </TEXTS>
   </A0_MAINDATA>
   <ATTRIBUTS>
    <ITEM CMPNAME="A0_MAINDATA" VERSION="1" EXPOSURE="2" STATE="1" EDITORDER="1 " AUTHOR="TBENSIAL" CREATEDON="20110624" CHANGEDBY="TBENSIAL" CHANGEDON="20110812" ATTRDONLY="X" TYPTYPE="1" TYPE="TS_HEADER">
     <TEXTS>
      <ITEM LANG="E" TEXT="Enhancement Composite Header Data"/>
     </TEXTS>
    </ITEM>
    <ITEM CMPNAME="BADI_DEFINITIONS" VERSION="1" EXPOSURE="2" STATE="1" EDITORDER="2 " AUTHOR="TBENSIAL" CREATEDON="20110701" CHANGEDBY="TBENSIAL" CHANGEDON="20110812" ATTRDONLY="X" TYPTYPE="1" TYPE="TT_BADI_DEFS"/>
   </ATTRIBUTS>
   <FRIENDS>
    <ITEM REFCLSNAME="ZAPLINK_EASYXML" VERSION="1" STATE="1" AUTHOR="TBENSIAL" CREATEDON="20110624"/>
    <ITEM REFCLSNAME="ZAPLINK_ENHANCEMENT" VERSION="1" STATE="1" AUTHOR="TBENSIAL" CREATEDON="20110624"/>
   </FRIENDS>
   <LOCAL>
    <TYPES>`
*&quot;* USE THIS SOURCE FILE FOR ANY TYPE DECLARATIONS (CLASS
*&quot;* definitions, interfaces or data types) you need for method
*&quot;* IMPLEMENTATION OR PRIVATE METHOD&apos;S SIGNATURE</TYPES>
    <IMPLEMENTATIONS>`
*&quot;* LOCAL CLASS IMPLEMENTATION FOR PUBLIC CLASS
*&quot;* use this source file for the implementation part of
*&quot;* LOCAL HELPER CLASSES</IMPLEMENTATIONS>
    <MACROS>`
*&quot;* USE THIS SOURCE FILE FOR ANY MACRO DEFINITIONS YOU NEED
*&quot;* IN THE IMPLEMENTATION PART OF THE CLASS</MACROS>
   </LOCAL>
   <METHODS>
    <ITEM CMPNAME="FROM_DATA" VERSION="1" EXPOSURE="2" STATE="1" EDITORDER="1 " AUTHOR="TBENSIAL" CREATEDON="20110624" CHANGEDBY="TBENSIAL" CHANGEDON="20110812">
     <TEXTS>
      <ITEM LANG="E" TEXT="Convert FM Data to object attributes"/>
     </TEXTS>
     <PARAMETERS>
      <ITEM SCONAME="DATA" VERSION="1" CMPTYPE="1" EDITORDER="1 " AUTHOR="TBENSIAL" CREATEDON="20110624" CHANGEDBY="TBENSIAL" CHANGEDON="20110812" PARPASSTYP="1" TYPTYPE="1" TYPE="TS_FM_DATA">
       <TEXTS>
        <ITEM LANG="E" TEXT="Composite Enhancement Spot definition"/>
       </TEXTS>
      </ITEM>
     </PARAMETERS>
     <SOURCE>`
  DATA s_def      LIKE LINE OF badi_definitions.
  DATA s_filter   LIKE LINE OF s_def-filters.
  DATA s_texts    TYPE ts_sotr.
  FIELD-SYMBOLS:
    &lt;def&gt; LIKE LINE OF data-def_data,
    &lt;f&gt;   LIKE LINE OF &lt;def&gt;-filters.

* Header
  MOVE-CORRESPONDING data-header TO a0_maindata-main.
* Texts
  a0_maindata-texts = data-texts.

* Childs
  LOOP AT data-def_data ASSIGNING &lt;def&gt;.
    CLEAR s_def.
    MOVE-CORRESPONDING &lt;def&gt; TO s_def-main.
    s_texts-short = &lt;def&gt;-badi_shorttext_id.        s_texts-long = &lt;def&gt;-badi_longtext_id.
    s_def-texts = sotr_2_texts( s_texts ).
    LOOP AT &lt;def&gt;-filters ASSIGNING &lt;f&gt;.
      MOVE-CORRESPONDING &lt;f&gt; TO s_filter-main.
      s_texts-short = &lt;f&gt;-filtertext_id.            s_texts-long = space.
      s_filter-texts = sotr_2_texts( s_texts ).
      INSERT s_filter INTO TABLE s_def-filters.
    ENDLOOP.
    INSERT s_def INTO TABLE badi_definitions.
  ENDLOOP.</SOURCE>
    </ITEM>
    <ITEM CMPNAME="TO_DATA" VERSION="1" EXPOSURE="2" STATE="1" EDITORDER="2 " AUTHOR="TBENSIAL" CREATEDON="20110624" CHANGEDBY="TBENSIAL" CHANGEDON="20110812">
     <TEXTS>
      <ITEM LANG="E" TEXT="Convert object attributes to FM Data"/>
     </TEXTS>
     <PARAMETERS>
      <ITEM SCONAME="DATA" VERSION="1" CMPTYPE="1" EDITORDER="1 " AUTHOR="TBENSIAL" CREATEDON="20110713" CHANGEDBY="TBENSIAL" CHANGEDON="20110812" PARDECLTYP="3" TYPTYPE="1" TYPE="TS_FM_DATA">
       <TEXTS>
        <ITEM LANG="E" TEXT="Composite Enhancement Spot definition"/>
       </TEXTS>
      </ITEM>
     </PARAMETERS>
     <SOURCE>`
  DATA s_def      LIKE LINE OF data-def_data.
  DATA s_filter   LIKE LINE OF s_def-filters.
  FIELD-SYMBOLS:
    &lt;def&gt; LIKE LINE OF badi_definitions,
    &lt;f&gt;   LIKE LINE OF &lt;def&gt;-filters.

  MOVE-CORRESPONDING a0_maindata-main to data-header.
  LOOP AT badi_definitions ASSIGNING &lt;def&gt;.
    CLEAR s_def.
    MOVE-CORRESPONDING &lt;def&gt;-main TO s_def.
    LOOP AT &lt;def&gt;-filters ASSIGNING &lt;f&gt;.
      MOVE-CORRESPONDING &lt;f&gt;-main TO s_filter.
      INSERT s_filter INTO TABLE s_def-filters.
    ENDLOOP.
    INSERT s_def INTO TABLE data-def_data.
  ENDLOOP.</SOURCE>
    </ITEM>
   </METHODS>
   <REDEFINITIONS>
    <ITEM REFCLSNAME="ZAPLINK_ENHANCEMENT_DATA" VERSION="1" MTDNAME="ZAPLINK_CNX_EXT_CLEANER_4DATA~ANONYMIZE">
     <SOURCE>`
  CLEAR a0_maindata-createdon.</SOURCE>
    </ITEM>
    <ITEM REFCLSNAME="ZAPLINK_ENHANCEMENT_DATA" VERSION="1" MTDNAME="ZAPLINK_CNX_EXT_CLEANER_4DATA~UNANONYMIZE"/>
   </REDEFINITIONS>
   <TYPES>
    <ITEM CMPNAME="TS_BADI_DEF" VERSION="1" EXPOSURE="2" STATE="1" EDITORDER="5 " AUTHOR="TBENSIAL" CREATEDON="20110701" CHANGEDBY="TBENSIAL" CHANGEDON="20110812" TYPTYPE="4">BEGIN OF ts_badi_def.
*      include type ENH_BADI_DATA.
    INCLUDE TYPE ts_badi_def_main AS main.
    TYPES:
        texts     TYPE tt_ltexts,
        filters   TYPE tt_filter_defs,
      END OF ts_badi_def
`</ITEM>
    <ITEM CMPNAME="TS_BADI_DEF_MAIN" VERSION="1" EXPOSURE="2" STATE="1" EDITORDER="1 " AUTHOR="TBENSIAL" CREATEDON="20110713" CHANGEDBY="TBENSIAL" CHANGEDON="20110812" TYPTYPE="4">BEGIN OF ts_badi_def_main,
*      include type ENH_BADI_DATA.
* Will use move-corresponding
          badi_name       TYPE enh_badi_data-badi_name,
          interface_name  TYPE enh_badi_data-interface_name,
          single_use      TYPE enh_badi_data-single_use,
          context_mode    TYPE enh_badi_data-context_mode,
          sorter_badi     TYPE enh_badi_data-sorter_badi,
          default_class   TYPE enh_badi_data-default_class,
          mig_from_badi   TYPE enh_badi_data-mig_from_badi,
          img_docu_id     TYPE enh_badi_data-img_docu_id,
          use_fallback_class  TYPE enh_badi_data-use_fallback_class,
          filter_limitation   TYPE enh_badi_data-filter_limitation,
          exception_expected  TYPE enh_badi_data-exception_expected,
        END OF ts_badi_def_main
`</ITEM>
    <ITEM CMPNAME="TS_ENHSPOTCOMPHEAD" VERSION="1" EXPOSURE="2" STATE="1" EDITORDER="9 " AUTHOR="TBENSIAL" CREATEDON="20110812" CHANGEDBY="TBENSIAL" CHANGEDON="20110812" TYPTYPE="4">BEGIN OF ts_enhspotcomphead,
          name              TYPE enhspotcompositename,
          version	          TYPE r3state,
          comp_type	        TYPE enhspotcomptype,
          tool_type         TYPE enhspottooltype,
          composite         TYPE enhspotcompositename,
          internal_use      TYPE enh_dy_spot-internal_use.
    INCLUDE TYPE ts_get_language AS lang.
    INCLUDE TYPE ts_get_attributes AS attrs.
    TYPES:
      END OF ts_enhspotcomphead
`</ITEM>
    <ITEM CMPNAME="TS_FILTER_DEF" VERSION="1" EXPOSURE="2" STATE="1" EDITORDER="3 " AUTHOR="TBENSIAL" CREATEDON="20110713" CHANGEDBY="TBENSIAL" CHANGEDON="20110812" TYPTYPE="4">BEGIN OF ts_filter_def.
*      include type ENH_BADI_DATA.
    INCLUDE TYPE ts_filter_main AS main.
    TYPES:
        texts TYPE tt_ltexts,
      END OF ts_filter_def
`</ITEM>
    <ITEM CMPNAME="TS_FILTER_MAIN" VERSION="1" EXPOSURE="2" STATE="1" EDITORDER="2 " AUTHOR="TBENSIAL" CREATEDON="20110713" CHANGEDBY="TBENSIAL" CHANGEDON="20110812" TYPTYPE="4">BEGIN OF ts_filter_main,
*      include type ENH_BADI_FILTER.
* Will use move-corresponding
          filter_name         TYPE enh_badi_filter-filter_name,
          filter_type         TYPE enh_badi_filter-filter_type,
          constant            TYPE enh_badi_filter-constant,
          check_type          TYPE enh_badi_filter-check_type,
          check_type_is_dom   TYPE enh_badi_filter-check_type_is_dom,
          check_class         TYPE enh_badi_filter-check_class,
          check_length        TYPE enh_badi_filter-check_length,
          check_decs          TYPE enh_badi_filter-check_decs,
        END OF ts_filter_main
`</ITEM>
    <ITEM CMPNAME="TS_FM_DATA" VERSION="1" EXPOSURE="2" STATE="1" EDITORDER="11 " AUTHOR="TBENSIAL" CREATEDON="20110624" CHANGEDBY="TBENSIAL" CHANGEDON="20110812" TYPTYPE="4">
     BEGIN OF ts_fm_data,
          header          TYPE ts_enhspotcomphead,
          texts           TYPE tt_ltexts,
          def_data        TYPE enh_badi_data_it,
*     documentation   TYPE tt_docs,
        END OF ts_fm_data
`
     <TEXTS>
      <ITEM LANG="E" TEXT="Composite Enhancement Spot definition"/>
     </TEXTS>
    </ITEM>
    <ITEM CMPNAME="TS_GET_ATTRIBUTES" VERSION="1" EXPOSURE="2" STATE="1" EDITORDER="8 " AUTHOR="TBENSIAL" CREATEDON="20110812" CHANGEDBY="TBENSIAL" CHANGEDON="20110812" TYPTYPE="4">BEGIN OF ts_get_attributes,
          author      TYPE  cnam,
          createdon   TYPE  rdir_cdate,
          changedby   TYPE  unam,
          changedon   TYPE  rdir_udate,
        END OF ts_get_attributes
`</ITEM>
    <ITEM CMPNAME="TS_GET_LANGUAGE" VERSION="1" EXPOSURE="2" STATE="1" EDITORDER="7 " AUTHOR="TBENSIAL" CREATEDON="20110812" CHANGEDBY="TBENSIAL" CHANGEDON="20110812" TYPTYPE="4">BEGIN OF ts_get_language,
          language      TYPE  spras,
*        modi_langu    TYPE  spras,  &quot; only on editing
        END OF ts_get_language
`</ITEM>
    <ITEM CMPNAME="TS_HEADER" VERSION="1" EXPOSURE="2" STATE="1" EDITORDER="10 " AUTHOR="TBENSIAL" CREATEDON="20110624" CHANGEDBY="TBENSIAL" CHANGEDON="20110812" TYPTYPE="4">
     BEGIN OF ts_header.
    INCLUDE TYPE ts_enhspotcomphead AS main.
    TYPES:
        texts             TYPE tt_ltexts,
      END OF ts_header
`
     <TEXTS>
      <ITEM LANG="E" TEXT="Enhancement Composite Header Data"/>
     </TEXTS>
    </ITEM>
    <ITEM CMPNAME="TT_BADI_DEFS" VERSION="1" EXPOSURE="2" STATE="1" EDITORDER="6 " AUTHOR="TBENSIAL" CREATEDON="20110701" CHANGEDBY="TBENSIAL" CHANGEDON="20110812" TYPTYPE="4">tt_badi_defs TYPE SORTED TABLE OF ts_badi_def WITH UNIQUE KEY badi_name
`</ITEM>
    <ITEM CMPNAME="TT_FILTER_DEFS" VERSION="1" EXPOSURE="2" STATE="1" EDITORDER="4 " AUTHOR="TBENSIAL" CREATEDON="20110713" CHANGEDBY="TBENSIAL" CHANGEDON="20110812" TYPTYPE="4">tt_filter_defs TYPE SORTED TABLE OF ts_filter_def WITH UNIQUE KEY filter_name
`</ITEM>
   </TYPES>
  </RAW>
 </ZL_OBJECT>
 <ZL_OBJECT CHECKSUM="5282BDE8C946A89A211AEBDBA95B2248" CODE_SIGNATURE="08AB8674E3D1E389E5AA174DE797994C" CONNECTOR="39AC0A4B07A5A05AE1000000AC120173" NAME="ZAPLINK_ENSC_DATA" TYPE="CLAS" VERSION="1.01">
  <DEPENDENCIES>
   <ITEM TYPE="CLAS" NAME="ZAPLINK_ENHANCEMENT_DATA"/>
  </DEPENDENCIES>
  <DIRECTORY SRCSYSTEM="OD6" AUTHOR="TBENSIAL" DEVCLASS="ZAPLINK-CONNECTORS-MAIN" MASTERLANG="E"/>
  <RAW>
   <A0_MAINDATA VERSION="1" LANGU="E" EXPOSURE="1" STATE="1" AUTHOR="TBENSIAL" CREATEDON="20110622" CHANGEDBY="TBENSIAL" CHANGEDON="20110622" CLSCCINCL="X" FIXPT="X" UNICODE="X" R3RELEASE="701">
    <INHERITANCE REFCLSNAME="ZAPLINK_ENHANCEMENT_DATA" VERSION="1" STATE="1" AUTHOR="TBENSIAL" CREATEDON="20110701" CHANGEDBY="TBENSIAL" CHANGEDON="20110701"/>
    <TEXTS>
     <ITEM LANG="E" TEXT="Data for Composit Enhancement Spot">U1&amp;FUNCTIONALITY&amp;
ASIs part of connector : ZAPLINK_BADI
U1&amp;RELATIONS&amp;
AS
U1&amp;EXAMPLE&amp;
AS
U1&amp;HINTS&amp;
AS
U1&amp;FURTHER_SOURCES_OF_INF&amp;
AS
U1Memories
ASThis application is dedicated to the memories of :
B2My father : Lamri BENSIALI (1940-2004) without whom I never started
  programming
B2My uncle : Jacky BEDU (1934-2009) who died during the completion of this
  application</ITEM>
    </TEXTS>
   </A0_MAINDATA>
   <ATTRIBUTS>
    <ITEM CMPNAME="A0_MAINDATA" VERSION="1" EXPOSURE="2" STATE="1" EDITORDER="1 " AUTHOR="TBENSIAL" CREATEDON="20110622" CHANGEDBY="TBENSIAL" CHANGEDON="20110808" ATTRDONLY="X" TYPTYPE="1" TYPE="TS_HEADER">
     <TEXTS>
      <ITEM LANG="E" TEXT="Enhancement Composite Header Data"/>
     </TEXTS>
    </ITEM>
    <ITEM CMPNAME="COMPOSIT_ENHANCEMENTS" VERSION="1" EXPOSURE="2" STATE="1" EDITORDER="3 " AUTHOR="TBENSIAL" CREATEDON="20110630" CHANGEDBY="TBENSIAL" CHANGEDON="20110808" ATTRDONLY="X" TYPTYPE="1" TYPE="TT_COMP_ENH"/>
    <ITEM CMPNAME="ENHANCEMENTS" VERSION="1" EXPOSURE="2" STATE="1" EDITORDER="2 " AUTHOR="TBENSIAL" CREATEDON="20110630" CHANGEDBY="TBENSIAL" CHANGEDON="20110808" ATTRDONLY="X" TYPTYPE="1" TYPE="TT_ENH"/>
   </ATTRIBUTS>
   <FRIENDS>
    <ITEM REFCLSNAME="ZAPLINK_EASYXML" VERSION="1" STATE="1" AUTHOR="TBENSIAL" CREATEDON="20110622"/>
    <ITEM REFCLSNAME="ZAPLINK_ENHANCEMENT" VERSION="1" STATE="1" AUTHOR="TBENSIAL" CREATEDON="20110622"/>
   </FRIENDS>
   <LOCAL>
    <TYPES>`
*&quot;* USE THIS SOURCE FILE FOR ANY TYPE DECLARATIONS (CLASS
*&quot;* definitions, interfaces or data types) you need for method
*&quot;* IMPLEMENTATION OR PRIVATE METHOD&apos;S SIGNATURE</TYPES>
    <IMPLEMENTATIONS>`
*&quot;* LOCAL CLASS IMPLEMENTATION FOR PUBLIC CLASS
*&quot;* use this source file for the implementation part of
*&quot;* LOCAL HELPER CLASSES</IMPLEMENTATIONS>
    <MACROS>`
*&quot;* USE THIS SOURCE FILE FOR ANY MACRO DEFINITIONS YOU NEED
*&quot;* IN THE IMPLEMENTATION PART OF THE CLASS</MACROS>
   </LOCAL>
   <METHODS>
    <ITEM CMPNAME="FROM_DATA" VERSION="1" EXPOSURE="1" STATE="1" EDITORDER="1 " AUTHOR="TBENSIAL" CREATEDON="20110622" CHANGEDBY="TBENSIAL" CHANGEDON="20110701">
     <TEXTS>
      <ITEM LANG="E" TEXT="Convert FM Data to object attributes"/>
     </TEXTS>
     <PARAMETERS>
      <ITEM SCONAME="DATA" VERSION="1" CMPTYPE="1" EDITORDER="1 " AUTHOR="TBENSIAL" CREATEDON="20110622" CHANGEDBY="TBENSIAL" CHANGEDON="20110630" PARPASSTYP="1" TYPTYPE="1" TYPE="TS_FM_DATA">
       <TEXTS>
        <ITEM LANG="E" TEXT="Composite Enhancement Spot definition"/>
       </TEXTS>
      </ITEM>
     </PARAMETERS>
     <SOURCE>`
  DATA s_enh    LIKE LINE OF enhancements.
  DATA s_comp   LIKE LINE OF composit_enhancements.
  DATA s_txt    TYPE ts_sotr.
  FIELD-SYMBOLS:
    &lt;enh&gt;   LIKE LINE OF data-enh,
    &lt;comp&gt;  LIKE LINE OF data-comp_enh.

  a0_maindata-main = data-header.
  s_txt-short = a0_maindata-shorttextid.
  s_txt-long = a0_maindata-docuid.
  a0_maindata-texts = sotr_2_texts( s_txt ).
  CLEAR: a0_maindata-shorttextid, a0_maindata-docuid.
  LOOP AT data-enh ASSIGNING &lt;enh&gt;.
    CLEAR s_enh.
    s_enh-name = &lt;enh&gt;.
    APPEND s_enh TO enhancements.
  ENDLOOP.
  LOOP AT data-comp_enh ASSIGNING &lt;comp&gt;.
    CLEAR s_comp.
    s_comp-name = &lt;comp&gt;.
    APPEND s_comp TO composit_enhancements.
  ENDLOOP.</SOURCE>
    </ITEM>
    <ITEM CMPNAME="TO_DATA" VERSION="1" EXPOSURE="1" STATE="1" EDITORDER="2 " AUTHOR="TBENSIAL" CREATEDON="20110622" CHANGEDBY="TBENSIAL" CHANGEDON="20110701">
     <TEXTS>
      <ITEM LANG="E" TEXT="Convert object attributes to FM Data"/>
     </TEXTS>
     <PARAMETERS>
      <ITEM SCONAME="DATA" VERSION="1" CMPTYPE="1" EDITORDER="1 " AUTHOR="TBENSIAL" CREATEDON="20110630" PARDECLTYP="3" TYPTYPE="1" TYPE="TS_FM_DATA">
       <TEXTS>
        <ITEM LANG="E" TEXT="Composite Enhancement Spot definition"/>
       </TEXTS>
      </ITEM>
     </PARAMETERS>
     <SOURCE>`
  DATA s_enh    LIKE LINE OF data-enh.
  DATA s_comp   LIKE LINE OF data-comp_enh.
  FIELD-SYMBOLS:
    &lt;enh&gt;   LIKE LINE OF enhancements,
    &lt;comp&gt;  LIKE LINE OF composit_enhancements.

  data-header = a0_maindata-main.
  LOOP AT enhancements ASSIGNING &lt;enh&gt;.
    CLEAR s_enh.
    s_enh = &lt;enh&gt;-name.
    APPEND s_enh TO data-enh.
  ENDLOOP.
  LOOP AT composit_enhancements ASSIGNING &lt;comp&gt;.
    CLEAR s_comp.
    s_comp = &lt;comp&gt;-name.
    APPEND s_comp TO data-comp_enh.
  ENDLOOP.</SOURCE>
    </ITEM>
   </METHODS>
   <REDEFINITIONS>
    <ITEM REFCLSNAME="ZAPLINK_ENHANCEMENT_DATA" VERSION="1" MTDNAME="ZAPLINK_CNX_EXT_CLEANER_4DATA~ANONYMIZE">
     <SOURCE>`
  CLEAR a0_maindata-createdon.</SOURCE>
    </ITEM>
    <ITEM REFCLSNAME="ZAPLINK_ENHANCEMENT_DATA" VERSION="1" MTDNAME="ZAPLINK_CNX_EXT_CLEANER_4DATA~UNANONYMIZE"/>
   </REDEFINITIONS>
   <TYPEGROUPS>
    <ITEM TYPEGROUP="SEEX" VERSION="1" EXPLICIT="X"/>
   </TYPEGROUPS>
   <TYPES>
    <ITEM CMPNAME="TS_COMP_ENH" VERSION="1" EXPOSURE="2" STATE="1" EDITORDER="2 " AUTHOR="TBENSIAL" CREATEDON="20110630" CHANGEDBY="TBENSIAL" CHANGEDON="20110812" TYPTYPE="4">BEGIN OF ts_comp_enh,
          name        TYPE enhspotcompositename,
          zl_object   TYPE to_raw,
        END OF ts_comp_enh
`</ITEM>
    <ITEM CMPNAME="TS_ENH" VERSION="1" EXPOSURE="2" STATE="1" EDITORDER="4 " AUTHOR="TBENSIAL" CREATEDON="20110630" CHANGEDBY="TBENSIAL" CHANGEDON="20110812" TYPTYPE="4">BEGIN OF ts_enh,
          name        TYPE enhspotname,
          zl_object   TYPE to_raw,
        END OF ts_enh
`</ITEM>
    <ITEM CMPNAME="TS_FM_DATA" VERSION="1" EXPOSURE="2" STATE="1" EDITORDER="6 " AUTHOR="TBENSIAL" CREATEDON="20110623" CHANGEDBY="TBENSIAL" CHANGEDON="20110812" TYPTYPE="4">
     BEGIN OF ts_fm_data,
          header          TYPE enhspotcomphead,
*          texts           TYPE ts_sotr,
          comp_enh        TYPE enhspotcompositename_it,
          enh             TYPE enhspotname_it,
*     documentation   TYPE tt_docs,
        END OF ts_fm_data
`
     <TEXTS>
      <ITEM LANG="E" TEXT="Composite Enhancement Spot definition"/>
     </TEXTS>
    </ITEM>
    <ITEM CMPNAME="TS_HEADER" VERSION="1" EXPOSURE="2" STATE="1" EDITORDER="1 " AUTHOR="TBENSIAL" CREATEDON="20110623" CHANGEDBY="TBENSIAL" CHANGEDON="20110812" TYPTYPE="4">
     BEGIN OF ts_header.
    INCLUDE TYPE enhspotcomphead AS main.
    TYPES:
        texts TYPE tt_ltexts,
      END OF ts_header
`
     <TEXTS>
      <ITEM LANG="E" TEXT="Enhancement Composite Header Data"/>
     </TEXTS>
    </ITEM>
    <ITEM CMPNAME="TT_COMP_ENH" VERSION="1" EXPOSURE="2" STATE="1" EDITORDER="3 " AUTHOR="TBENSIAL" CREATEDON="20110630" CHANGEDBY="TBENSIAL" CHANGEDON="20110812" TYPTYPE="4">tt_comp_enh TYPE STANDARD TABLE OF ts_comp_enh WITH DEFAULT KEY
`</ITEM>
    <ITEM CMPNAME="TT_ENH" VERSION="1" EXPOSURE="2" STATE="1" EDITORDER="5 " AUTHOR="TBENSIAL" CREATEDON="20110630" CHANGEDBY="TBENSIAL" CHANGEDON="20110812" TYPTYPE="4">tt_enh TYPE STANDARD TABLE OF ts_enh WITH DEFAULT KEY
`</ITEM>
   </TYPES>
  </RAW>
 </ZL_OBJECT>
</CONTAINER>
